<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pengurusan Aset Sewaan Kerajaan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5f7a;
            --secondary: #57c5b6;
            --accent: #159895;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ===== HEADER & NAVIGATION ===== */
        .main-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.2rem;
        }
        
        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .header-stats {
            display: flex;
            gap: 30px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        .user-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 6px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: white;
            color: var(--primary);
        }
        
        .btn-primary:hover {
            background-color: var(--light);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #46a99a;
        }
        
        .btn-outline {
            background-color: transparent;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 30px;
            cursor: pointer;
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            background-color: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* ===== MAIN NAVIGATION ===== */
        .main-nav {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 5px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 15px 20px;
            display: inline-block;
            transition: all 0.3s;
            border-radius: 5px;
        }
        
        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(26, 95, 122, 0.1);
            color: var(--primary);
        }
        
        .quick-actions {
            display: flex;
            gap: 10px;
        }
        
        /* ===== DASHBOARD ===== */
        .dashboard {
            padding: 2rem 0;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 2rem;
        }
        
        .dashboard-card {
            background-color: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .card-header h3 {
            font-size: 1.3rem;
            color: var(--primary);
        }
        
        .asset-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background-color: var(--light);
        }
        
        .summary-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* ===== ASSET TYPES GRID ===== */
        .asset-types {
            margin: 3rem 0;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .section-header h2 {
            font-size: 1.8rem;
            color: var(--primary);
            position: relative;
            padding-left: 15px;
        }
        
        .section-header h2:before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            height: 80%;
            width: 5px;
            background-color: var(--secondary);
            border-radius: 3px;
        }
        
        .assets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .asset-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--light-gray);
        }
        
        .asset-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .asset-header {
            padding: 1.5rem;
            background-color: var(--light);
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .asset-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .office { background-color: #3498db; }
        .quarter { background-color: #9b59b6; }
        .land { background-color: #2ecc71; }
        .rest-house { background-color: #e74c3c; }
        .shop { background-color: #f39c12; }
        .complex { background-color: #1abc9c; }
        .jetty { background-color: #34495e; }
        .room { background-color: #7f8c8d; }
        
        .asset-info h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .asset-info p {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .asset-details {
            padding: 1.5rem;
        }
        
        .asset-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.2rem;
        }
        
        .asset-stat {
            text-align: center;
        }
        
        .asset-stat .value {
            font-size: 1.5rem;
            font-weight: 700;
            display: block;
        }
        
        .asset-stat .label {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .available {
            color: var(--success);
        }
        
        .occupied {
            color: var(--dark);
        }
        
        .vacancy-rate {
            background-color: var(--light);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .vacancy-rate .rate {
            font-weight: 700;
            color: var(--primary);
        }
        
        .asset-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-small {
            padding: 8px 12px;
            font-size: 0.85rem;
        }
        
        /* ===== QUARTERS DETAILS ===== */
        .quarters-section {
            margin: 3rem 0;
        }
        
        .quarters-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }
        
        .quarters-map {
            background-color: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .map-placeholder {
            height: 300px;
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        .location-list {
            margin-top: 2rem;
        }
        
        .location-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .location-name {
            font-weight: 500;
        }
        
        .location-count {
            background-color: var(--primary);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        
        /* ===== APPLICATION SECTION ===== */
        .application-section {
            margin: 3rem 0;
        }
        
        .application-form {
            background-color: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group.full-width {
            grid-column: 1 / span 2;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .required:after {
            content: '*';
            color: var(--danger);
            margin-left: 3px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
        }
        
        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23343a40' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 15px;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        /* ===== REPORTS SECTION ===== */
        .reports-section {
            margin: 3rem 0;
        }
        
        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .report-card {
            background-color: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .report-card:hover {
            transform: translateY(-5px);
        }
        
        .report-icon {
            width: 60px;
            height: 60px;
            background-color: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 1.5rem;
        }
        
        /* ===== MODALS ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 15px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            padding: 1.5rem 2rem;
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 15px 15px 0 0;
        }
        
        .modal-header h3 {
            font-size: 1.4rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .close-modal:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .modal-footer {
            padding: 1.5rem 2rem;
            background-color: var(--light);
            border-top: 1px solid var(--light-gray);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            border-radius: 0 0 15px 15px;
        }
        
        /* ===== FOOTER ===== */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 3rem 0 1.5rem;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-section h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--secondary);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1200px) {
            .quarters-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-stats {
                order: 3;
                width: 100%;
                justify-content: center;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 15px;
                padding: 15px 0;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-group.full-width {
                grid-column: 1;
            }
        }
        
        @media (max-width: 768px) {
            .assets-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-body {
                padding: 1.5rem;
            }
            
            .reports-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .logo-text h1 {
                font-size: 1.5rem;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .asset-actions {
                flex-direction: column;
            }
            
            .user-section {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        /* ===== NOTIFICATIONS ===== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 3000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background-color: var(--success);
        }
        
        .notification.error {
            background-color: var(--danger);
        }
        
        .notification.info {
            background-color: var(--primary);
        }
        
        /* ===== LOADING SPINNER ===== */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--light-gray);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ===== BADGES ===== */
        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .badge-success {
            background-color: rgba(40, 167, 69, 0.15);
            color: var(--success);
        }
        
        .badge-warning {
            background-color: rgba(255, 193, 7, 0.15);
            color: #b88b00;
        }
        
        .badge-danger {
            background-color: rgba(220, 53, 69, 0.15);
            color: var(--danger);
        }
        
        /* ===== TABLES ===== */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .data-table th {
            background-color: var(--primary);
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .data-table td {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .data-table tr:hover {
            background-color: rgba(26, 95, 122, 0.05);
        }
        
        /* ===== PAGINATION ===== */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 2rem;
        }
        
        .page-btn {
            width: 40px;
            height: 40px;
            border: 1px solid var(--light-gray);
            background-color: white;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .page-btn:hover, .page-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Notification System -->
    <div id="notificationContainer"></div>
    
    <!-- Header -->
    <header class="main-header">
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-building"></i>
                <div class="logo-text">
                    <h1>Sistem Pengurusan Aset Sewaan</h1>
                    <p>Kementerian/Kerajaan Negeri</p>
                </div>
            </div>
            
            <div class="header-stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalQuarters">181</div>
                    <div class="stat-label">Jumlah Kuarters</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="availableQuarters">49</div>
                    <div class="stat-label">Kuarters Kosong</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">8</div>
                    <div class="stat-label">Jenis Aset</div>
                </div>
            </div>
            
            <div class="user-section" id="userSection">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="container nav-container">
            <ul class="nav-links">
                <li><a href="#" class="active" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#" data-page="assets"><i class="fas fa-building"></i> Aset Sewaan</a></li>
                <li><a href="#" data-page="quarters"><i class="fas fa-home"></i> Kuarters Kakitangan</a></li>
                <li><a href="#" data-page="application"><i class="fas fa-file-alt"></i> Permohonan</a></li>
                <li><a href="#" data-page="reports"><i class="fas fa-chart-bar"></i> Laporan</a></li>
                <li><a href="#" data-page="management"><i class="fas fa-cog"></i> Pengurusan</a></li>
            </ul>
            
            <div class="quick-actions">
                <button class="btn btn-outline" id="vacancyReportBtn">
                    <i class="fas fa-chart-pie"></i> Laporan Kekosongan
                </button>
                <button class="btn btn-primary" id="newApplicationBtn">
                    <i class="fas fa-plus"></i> Permohonan Baru
                </button>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="container">
        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page-content">
            <div class="dashboard">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> Ringkasan Aset</h3>
                        </div>
                        <div class="asset-summary">
                            <div class="summary-item">
                                <div class="summary-value" id="totalAssets">250</div>
                                <div class="summary-label">Jumlah Aset</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="occupiedAssets">132</div>
                                <div class="summary-label">Diduduki</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="vacantAssets">118</div>
                                <div class="summary-label">Kosong</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="vacancyRate">47.2%</div>
                                <div class="summary-label">Kadar Kekosongan</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-file-alt"></i> Permohonan</h3>
                        </div>
                        <div class="asset-summary">
                            <div class="summary-item">
                                <div class="summary-value" id="totalApplications">89</div>
                                <div class="summary-label">Jumlah</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="pendingApplications">24</div>
                                <div class="summary-label">Dalam Proses</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="approvedApplications">52</div>
                                <div class="summary-label">Diluluskan</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="rejectedApplications">13</div>
                                <div class="summary-label">Ditolak</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-money-bill-wave"></i> Hasil Sewaan</h3>
                        </div>
                        <div class="asset-summary">
                            <div class="summary-item">
                                <div class="summary-value" id="monthlyRevenue">RM 45,200</div>
                                <div class="summary-label">Bulan Ini</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="yearlyRevenue">RM 542,400</div>
                                <div class="summary-label">Tahunan</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="collectionRate">94.5%</div>
                                <div class="summary-label">Kadar Kutipan</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="outstandingAmount">RM 12,500</div>
                                <div class="summary-label">Tertunggak</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3><i class="fas fa-history"></i> Aktiviti Terkini</h3>
                        <button class="btn btn-small btn-outline">Lihat Semua</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Tarikh</th>
                                <th>Aktiviti</th>
                                <th>Butiran</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="recentActivities">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Assets Page -->
        <div id="assetsPage" class="page-content" style="display: none;">
            <div class="asset-types">
                <div class="section-header">
                    <h2>Jenis Aset Sewaan</h2>
                    <div class="quick-actions">
                        <button class="btn btn-outline" id="filterAll">Semua</button>
                        <button class="btn btn-outline" id="filterAvailable">Tersedia Sahaja</button>
                    </div>
                </div>
                
                <div class="assets-grid" id="assetsContainer">
                    <!-- Asset cards will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Quarters Page -->
        <div id="quartersPage" class="page-content" style="display: none;">
            <div class="quarters-section">
                <div class="section-header">
                    <h2>Kuarters Kakitangan</h2>
                    <div>
                        <span class="badge badge-success">49 unit tersedia</span>
                        <span class="badge" style="margin-left: 10px;">181 unit keseluruhan</span>
                    </div>
                </div>
                
                <div class="quarters-grid">
                    <div class="quarters-map">
                        <h3>Lokasi Kuarters</h3>
                        <div class="map-placeholder">
                            <i class="fas fa-map-marked-alt"></i> Peta Lokasi Kuarters
                        </div>
                        
                        <div class="location-list">
                            <h4 style="margin-bottom: 1rem;">Senarai Lokasi</h4>
                            <div class="location-item">
                                <span class="location-name">Kuala Lumpur</span>
                                <span class="location-count">24 unit</span>
                            </div>
                            <div class="location-item">
                                <span class="location-name">Shah Alam</span>
                                <span class="location-count">32 unit</span>
                            </div>
                            <div class="location-item">
                                <span class="location-name">Petaling Jaya</span>
                                <span class="location-count">18 unit</span>
                            </div>
                            <div class="location-item">
                                <span class="location-name">Subang Jaya</span>
                                <span class="location-count">15 unit</span>
                            </div>
                            <div class="location-item">
                                <span class="location-name">Klang</span>
                                <span class="location-count">28 unit</span>
                            </div>
                            <div class="location-item">
                                <span class="location-name">Seremban</span>
                                <span class="location-count">12 unit</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Statistik Kuarters</h3>
                        </div>
                        <div class="asset-summary">
                            <div class="summary-item">
                                <div class="summary-value" id="quartersTotal">181</div>
                                <div class="summary-label">Jumlah Unit</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="quartersOccupied">132</div>
                                <div class="summary-label">Diduduki</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="quartersVacant">49</div>
                                <div class="summary-label">Kosong</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value" id="quartersRate">27.1%</div>
                                <div class="summary-label">Kadar Kekosongan</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem;">
                            <h4>Kuarters Tersedia Mengikut Jenis</h4>
                            <div class="location-list">
                                <div class="location-item">
                                    <span class="location-name">Type A (3 Bilik)</span>
                                    <span class="location-count">18 unit</span>
                                </div>
                                <div class="location-item">
                                    <span class="location-name">Type B (2 Bilik)</span>
                                    <span class="location-count">22 unit</span>
                                </div> 
                                <div class="location-item">
                                    <span class="location-name">Type C (1 Bilik)</span>
                                    <span class="location-count">9 unit</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Application Page -->
        <div id="applicationPage" class="page-content" style="display: none;">
            <div class="application-section">
                <div class="section-header">
                    <h2>Permohonan Sewaan Aset</h2>
                    <button class="btn btn-primary" id="applyNowBtn">
                        <i class="fas fa-plus"></i> Mohon Sekarang
                    </button>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Permohonan Anda</h3>
                        <div class="quick-actions">
                            <button class="btn btn-small btn-outline" id="filterPending">Dalam Proses</button>
                            <button class="btn btn-small btn-outline" id="filterApproved">Diluluskan</button>
                        </div>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>No. Rujukan</th>
                                <th>Jenis Aset</th>
                                <th>Tarikh Mohon</th>
                                <th>Status</th>
                                <th>Tindakan</th>
                            </tr>
                        </thead>
                        <tbody id="userApplications">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                    
                    <div class="pagination">
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <button class="page-btn">></button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Reports Page -->
        <div id="reportsPage" class="page-content" style="display: none;">
            <div class="reports-section">
                <div class="section-header">
                    <h2>Laporan dan Analisis</h2>
                    <button class="btn btn-primary" id="generateReportBtn">
                        <i class="fas fa-download"></i> Eksport Laporan
                    </button>
                </div>
                
                <div class="reports-grid">
                    <div class="report-card" data-report="vacancy">
                        <div class="report-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3>Laporan Kekosongan</h3>
                        <p>Analisis kadar kekosongan aset mengikut jenis dan lokasi</p>
                    </div>
                    
                    <div class="report-card" data-report="revenue">
                        <div class="report-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <h3>Laporan Hasil</h3>
                        <p>Prestasi kutipan sewaan bulanan dan tahunan</p>
                    </div>
                    
                    <div class="report-card" data-report="applications">
                        <div class="report-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h3>Laporan Permohonan</h3>
                        <p>Statistik permohonan dan kadar kelulusan</p>
                    </div>
                    
                    <div class="report-card" data-report="maintenance">
                        <div class="report-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <h3>Laporan Penyelenggaraan</h3>
                        <p>Rekod penyelenggaraan dan pembaikan aset</p>
                    </div>
                    
                    <div class="report-card" data-report="utilization">
                        <div class="report-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <h3>Laporan Penggunaan</h3>
                        <p>Analisis penggunaan optimum aset sewaan</p>
                    </div>
                    
                    <div class="report-card" data-report="audit">
                        <div class="report-icon">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <h3>Laporan Audit</h3>
                        <p>Pemeriksaan dan audit aset berkala</p>
                    </div>
                </div>
                
                <!-- Report Details -->
                <div class="dashboard-card" style="margin-top: 2rem;">
                    <div class="card-header">
                        <h3 id="reportTitle">Laporan Kekosongan Aset</h3>
                        <div class="quick-actions">
                            <select id="reportPeriod" class="form-control" style="width: auto;">
                                <option value="monthly">Bulan Ini</option>
                                <option value="quarterly">Suku Tahun</option>
                                <option value="yearly">Tahunan</option>
                            </select>
                        </div>
                    </div>
                    <div id="reportContent">
                        <!-- Report content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Management Page -->
        <div id="managementPage" class="page-content" style="display: none;">
            <div class="dashboard">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-users"></i> Pengurusan Pengguna</h3>
                            <button class="btn btn-small btn-primary" id="addUserBtn">
                                <i class="fas fa-user-plus"></i> Tambah
                            </button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nama</th>
                                    <th>Peranan</th>
                                    <th>Status</th>
                                    <th>Tindakan</th>
                                </tr>
                            </thead>
                            <tbody id="usersList">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-cogs"></i> Tetapan Sistem</h3>
                        </div>
                        <div style="padding: 1rem 0;">
                            <div class="form-group">
                                <label>Tempoh Sewaan Standard</label>
                                <select class="form-control" id="standardLease">
                                    <option value="12">12 Bulan</option>
                                    <option value="24">24 Bulan</option>
                                    <option value="36" selected>36 Bulan</option>
                                    <option value="60">60 Bulan</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Kadar Deposit</label>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <input type="number" class="form-control" id="depositRate" value="2" style="width: 100px;">
                                    <span>bulan sewa</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Notifikasi Automatik</label>
                                <div style="display: flex; flex-direction: column; gap: 10px;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <input type="checkbox" id="notifyExpiry" checked>
                                        <label for="notifyExpiry" style="margin-bottom: 0;">Peringatan tamat tempoh</label>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <input type="checkbox" id="notifyPayment" checked>
                                        <label for="notifyPayment" style="margin-bottom: 0;">Peringatan pembayaran</label>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" id="saveSettingsBtn">
                                <i class="fas fa-save"></i> Simpan Tetapan
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Sistem Pengurusan Aset</h3>
                    <p>Sistem pengurusan sewaan aset kerajaan yang efisien dan telus untuk kakitangan dan orang awam.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Hubungi Kami</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-phone"></i> 03-8888 1234</li>
                        <li><i class="fas fa-envelope"></i> aset@kerajaan.gov.my</li>
                        <li><i class="fas fa-map-marker-alt"></i> Aras 5, Menara Kerajaan</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Pautan Pantas</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#" data-page="application">Permohonan</a></li>
                        <li><a href="#" data-page="reports">Laporan</a></li>
                        <li><a href="#">Terma & Syarat</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2023 Sistem Pengurusan Aset Sewaan Kerajaan. Hak Cipta Terpelihara.
            </div>
        </div>
    </footer>
    
    <!-- Application Modal -->
    <div class="modal" id="applicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-file-alt"></i> Borang Permohonan Sewaan</h3>
                <button class="close-modal" id="closeApplicationModal">&times;</button>
            </div>
            
            <form id="rentalApplicationForm">
                <div class="modal-body">
                    <div class="auto-fill-notification" id="autoFillNotification" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        <span>Maklumat anda telah diisi automatik dari profil.</span>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="applicantName" class="required">Nama Pemohon</label>
                            <input type="text" id="applicantName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="applicantIC" class="required">No. Kad Pengenalan</label>
                            <input type="text" id="applicantIC" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="applicantPhone" class="required">No. Telefon</label>
                            <input type="tel" id="applicantPhone" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="applicantEmail" class="required">Email</label>
                            <input type="email" id="applicantEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="applicantAddress" class="required">Alamat Tempat Tinggal</label>
                        <textarea id="applicantAddress" class="form-control" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="assetType" class="required">Jenis Aset Dipohon</label>
                            <select id="modalAssetType" class="form-control" required>
                                <option value="">Sila Pilih</option>
                                <option value="kuarters">Kuarters Kakitangan</option>
                                <option value="pejabat">Sewa Pejabat</option>
                                <option value="tanah">Sewa Tanah Lot</option>
                                <option value="rumah_rehat">Sewa Rumah Rehat</option>
                                <option value="kedai">Sewa Lot Kedai</option>
                                <option value="kompleks">Bangunan Kompleks</option>
                                <option value="jeti">Jeti</option>
                                <option value="bilik">Bilik</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="location" class="required">Lokasi Pilihan</label>
                            <select id="modalLocation" class="form-control" required>
                                <option value="">Sila Pilih Jenis Aset Dahulu</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="startDate">Tarikh Mula Diingini</label>
                            <input type="date" id="startDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="duration">Tempoh Sewaan</label>
                            <select id="duration" class="form-control">
                                <option value="12">12 Bulan</option>
                                <option value="24">24 Bulan</option>
                                <option value="36" selected>36 Bulan</option>
                                <option value="60">60 Bulan</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="purpose" class="required">Tujuan Permohonan</label>
                        <textarea id="purpose" class="form-control" placeholder="Sila nyatakan tujuan permohonan sewaan ini..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalInfo">Maklumat Tambahan (Jika Ada)</label>
                        <textarea id="additionalInfo" class="form-control" placeholder="Sebarang maklumat tambahan yang perlu dimaklumkan..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <div style="display: flex; align-items: start; gap: 10px;">
                            <input type="checkbox" id="agreeTerms" required style="margin-top: 3px;">
                            <label for="agreeTerms" style="margin-bottom: 0; font-size: 0.9rem;">
                                Saya mengakui bahawa maklumat yang diberikan adalah benar dan saya bersetuju dengan terma dan syarat permohonan.
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" id="cancelApplication">Batal</button>
                    <button type="submit" class="btn btn-primary">Hantar Permohonan</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(to right, var(--success), #20c997);">
                <h3><i class="fas fa-check-circle"></i> Permohonan Berjaya!</h3>
                <button class="close-modal" id="closeSuccessModal">&times;</button>
            </div>
            <div class="modal-body" style="text-align: center; padding: 3rem;">
                <div style="font-size: 4rem; color: var(--success); margin-bottom: 1rem;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 style="color: var(--primary); margin-bottom: 1rem;">Permohonan Anda Telah Dihantar</h3>
                <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
                    No. Rujukan: <strong id="referenceNumber">APP-2023-001</strong>
                </p>
                <div style="background-color: var(--light); padding: 1.5rem; border-radius: 10px; text-align: left; margin-bottom: 2rem;">
                    <h4 style="margin-bottom: 1rem;">Maklumat Permohonan:</h4>
                    <div class="detail-item">
                        <span class="detail-label">Jenis Aset:</span>
                        <span class="detail-value" id="successAssetType">Kuarters Kakitangan</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Lokasi:</span>
                        <span class="detail-value" id="successLocation">Shah Alam</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Lokasi:</span>
                        <span class="detail-value" id="successLocation">Kuala Perlis</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Tarikh Mohon:</span>
                        <span class="detail-value" id="successDate">15 Oktober 2023</span>
                    </div>
                </div>
                <p style="margin-bottom: 2rem;">Permohonan anda akan diproses dalam tempoh 14 hari bekerja.</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="btn" id="closeSuccessBtn">Tutup</button>
                    <button class="btn btn-primary" id="viewApplicationBtn">Lihat Status</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Report Modal -->
    <div class="modal" id="reportModal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h3 id="reportModalTitle">Laporan Kekosongan</h3>
                <button class="close-modal" id="closeReportModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="reportModalContent">
                    <!-- Report content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="printReportBtn"><i class="fas fa-print"></i> Cetak</button>
                <button class="btn btn-primary" id="exportReportBtn"><i class="fas fa-download"></i> Eksport PDF</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // GLOBAL VARIABLES AND DATA STORAGE
        // ============================================
        
        // User Management
        const USER_SESSION_KEY = 'asset_management_user';
        const CURRENT_USER_KEY = 'current_asset_user';
        
        // Asset Data
        const ASSETS_DATA = [
            {
                id: 1,
                type: "kuarters",
                name: "Kuarters Kakitangan",
                icon: "fas fa-home",
                color: "quarter",
                total: 181,
                available: 49,
                occupied: 132,
                monthlyRent: "RM 450",
                locations: ["Kuala Lumpur", "Shah Alam", "Petaling Jaya", "Subang Jaya", "Klang", "Seremban"],
                description: "Tempat tinggal untuk kakitangan kerajaan"
            },
            {
                id: 2,
                type: "pejabat",
                name: "Sewa Pejabat",
                icon: "fas fa-building",
                color: "office",
                total: 42,
                available: 12,
                occupied: 30,
                monthlyRent: "RM 2,500",
                locations: ["Menara A", "Menara B", "Kompleks Pejabat", "Plaza C"],
                description: "Ruang pejabat untuk organisasi"
            },
            {
                id: 3,
                type: "tanah",
                name: "Sewa Tanah Lot",
                icon: "fas fa-map-marked-alt",
                color: "land",
                total: 28,
                available: 8,
                occupied: 20,
                monthlyRent: "RM 3,200",
                locations: ["Seksyen 1", "Seksyen 2", "Kawasan Perindustrian", "Lots Perumahan"],
                description: "Tanah untuk pembangunan"
            },
            {
                id: 4,
                type: "rumah_rehat",
                name: "Sewa Rumah Rehat",
                icon: "fas fa-umbrella-beach",
                color: "rest-house",
                total: 15,
                available: 3,
                occupied: 12,
                monthlyRent: "RM 5,000",
                locations: ["Cameron Highlands", "Port Dickson", "Fraser's Hill"],
                description: "Rumah percutian untuk kakitangan"
            },
            {
                id: 5,
                type: "kedai",
                name: "Sewa Lot Kedai",
                icon: "fas fa-store",
                color: "shop",
                total: 67,
                available: 18,
                occupied: 49,
                monthlyRent: "RM 1,800",
                locations: ["Kompleks Perniagaan", "Pasaraya", "Pusat Bandar"],
                description: "Ruang perniagaan"
            },
            {
                id: 6,
                type: "kompleks",
                name: "Bangunan Kompleks",
                icon: "fas fa-city",
                color: "complex",
                total: 9,
                available: 1,
                occupied: 8,
                monthlyRent: "RM 15,000",
                locations: ["Kompleks A", "Kompleks B", "Kompleks C"],
                description: "Bangunan komersial lengkap"
            },
            {
                id: 7,
                type: "jeti",
                name: "Jeti",
                icon: "fas fa-ship",
                color: "jetty",
                total: 5,
                available: 2,
                occupied: 3,
                monthlyRent: "RM 1,200",
                locations: ["Jeti Utama", "Jeti Nelayan", "Jeti Pelancongan"],
                description: "Kemudahan jeti untuk aktiviti marin"
            },
            {
                id: 8,
                type: "bilik",
                name: "Bilik",
                icon: "fas fa-door-closed",
                color: "room",
                total: 120,
                available: 34,
                occupied: 86,
                monthlyRent: "RM 180",
                locations: ["Asrama A", "Asrama B", "Bangunan Latihan"],
                description: "Bilik asrama untuk kakitangan"
            }
        ];
        
        // User Applications
        let userApplications = JSON.parse(localStorage.getItem('user_applications')) || [
            {
                id: 1,
                reference: "APP-2023-001",
                assetType: "kuarters",
                assetName: "Kuarters Kakitangan - Type A",
                applyDate: "2023-10-15",
                status: "approved",
                statusText: "Diluluskan",
                location: "Shah Alam"
            },
            {
                id: 2,
                reference: "APP-2023-045",
                assetType: "kedai",
                assetName: "Lot Kedai - Kompleks Perniagaan",
                applyDate: "2023-09-28",
                status: "processing",
                statusText: "Dalam Proses",
                location: "Subang Jaya"
            },
            {
                id: 3,
                reference: "APP-2023-032",
                assetType: "pejabat",
                assetName: "Sewa Pejabat - Menara A",
                applyDate: "2023-08-10",
                status: "rejected",
                statusText: "Ditolak",
                location: "Kuala Lumpur"
            }
        ];
        
        // System Users
        const SYSTEM_USERS = [
            {
                id: 1,
                name: "Admin Sistem",
                role: "Administrator",
                email: "admin@email.com",
                status: "active",
                lastLogin: "2023-10-15 09:30"
            },
            {
                id: 2,
                name: "Pengurus Aset",
                role: "Manager",
                email: "manager@email.com",
                status: "active",
                lastLogin: "2023-10-14 14:20"
            },
            {
                id: 3,
                name: "Staf Sokongan",
                role: "Staff",
                email: "staff@email.com",
                status: "inactive",
                lastLogin: "2023-10-10 11:15"
            }
        ];
        
        // Recent Activities
        const RECENT_ACTIVITIES = [
            {
                date: "2023-10-15 09:30",
                activity: "Permohonan Baru",
                details: "Kuarters Kakitangan - Shah Alam",
                status: "success"
            },
            {
                date: "2023-10-14 14:20",
                activity: "Pembayaran Sewaan",
                details: "Lot Kedai SS15 - RM 1,800",
                status: "success"
            },
            {
                date: "2023-10-14 11:15",
                activity: "Kemaskini Aset",
                details: "Sewa Pejabat - Menara B",
                status: "info"
            },
            {
                date: "2023-10-13 16:45",
                activity: "Permohonan Ditolak",
                details: "Rumah Rehat - Cameron Highlands",
                status: "error"
            },
            {
                date: "2023-10-13 10:30",
                activity: "Penyelenggaraan",
                details: "Jeti Utama - Selesai",
                status: "success"
            }
        ];
        
        // Current User
        let currentUser = JSON.parse(sessionStorage.getItem(CURRENT_USER_KEY)) || 
                        JSON.parse(localStorage.getItem(USER_SESSION_KEY)) || 
                        {
                            id: 1,
                            name: "Ahmad bin Ali",
                            email: "ahmad@email.com",
                            role: "Kakitangan Kerajaan",
                            department: "Jabatan Kerja Raya",
                            isLoggedIn: true
                        };
        
        // ============================================
        // INITIALIZATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeSystem();
            setupEventListeners();
            loadDashboard();
        });
        
        function initializeSystem() {
            // Save demo data to localStorage
            localStorage.setItem('user_applications', JSON.stringify(userApplications));
            localStorage.setItem('system_users', JSON.stringify(SYSTEM_USERS));
            
            // Update user interface
            updateUserInterface();
            renderAssets();
            updateApplicationsTable();
            updateRecentActivities();
            updateUsersList();
            
            // Initialize statistics
            updateStatistics();
        }
        
        // ============================================
        // USER INTERFACE FUNCTIONS
        // ============================================
        
        function updateUserInterface() {
            // Update user section in header
            const userSection = document.getElementById('userSection');
            const initials = getInitials(currentUser.name);
            
            userSection.innerHTML = `
                <div class="user-profile" id="userProfileBtn">
                    <div class="user-avatar">${initials}</div>
                    <div>
                        <div style="font-weight: 500;">${currentUser.name}</div>
                        <div style="font-size: 0.8rem; opacity: 0.9;">${currentUser.role}</div>
                    </div>
                </div>
                <button class="btn btn-outline" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Log Keluar
                </button>
            `;
            
            // Setup user profile dropdown
            setupUserProfile();
        }
        
        function setupUserProfile() {
            const userProfileBtn = document.getElementById('userProfileBtn');
            
            if (!userProfileBtn) return;
            
            userProfileBtn.addEventListener('click', function() {
                showUserProfileModal();
            });
        }
        
        function showUserProfileModal() {
            const modalContent = `
                <div style="padding: 2rem;">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 2rem;">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); 
                            border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white; font-weight: bold;">
                            ${getInitials(currentUser.name)}
                        </div>
                        <div>
                            <h3 style="color: var(--primary); margin-bottom: 5px;">${currentUser.name}</h3>
                            <p style="color: var(--gray); margin-bottom: 5px;">${currentUser.role}</p>
                            <p style="color: var(--gray);">${currentUser.email}</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; gap: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--gray);">Jabatan/Agensi</label>
                            <div style="font-weight: 500;">${currentUser.department || 'Tiada'}</div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--gray);">Status Akaun</label>
                            <span class="badge badge-success">Aktif</span>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--gray);">Ahli Sejak</label>
                            <div style="font-weight: 500;">15 Oktober 2023</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--light-gray);">
                        <button class="btn" onclick="closeModal('profileModal')" style="width: 100%;">
                            <i class="fas fa-times"></i> Tutup
                        </button>
                    </div>
                </div>
            `;
            
            showModal('Profil Pengguna', modalContent, 'profileModal');
        }
        
        // ============================================
        // ASSET MANAGEMENT FUNCTIONS
        // ============================================
        
        function renderAssets() {
            const container = document.getElementById('assetsContainer');
            container.innerHTML = '';
            
            ASSETS_DATA.forEach(asset => {
                const vacancyRate = Math.round((asset.available / asset.total) * 100);
                const occupied = asset.total - asset.available;
                
                const card = document.createElement('div');
                card.className = 'asset-card fade-in';
                card.innerHTML = `
                    <div class="asset-header">
                        <div class="asset-icon ${asset.color}">
                            <i class="${asset.icon}"></i>
                        </div>
                        <div class="asset-info">
                            <h3>${asset.name}</h3>
                            <p>${asset.locations.length} lokasi berbeza</p>
                        </div>
                    </div>
                    <div class="asset-details">
                        <div class="asset-stats">
                            <div class="asset-stat">
                                <span class="value total">${asset.total}</span>
                                <span class="label">Jumlah Unit</span>
                            </div>
                            <div class="asset-stat">
                                <span class="value available">${asset.available}</span>
                                <span class="label">Tersedia</span>
                            </div>
                            <div class="asset-stat">
                                <span class="value occupied">${occupied}</span>
                                <span class="label">Diduduki</span>
                            </div>
                        </div>
                        <div class="vacancy-rate">
                            Kadar Kekosongan: <span class="rate">${vacancyRate}%</span>
                        </div>
                        <div class="asset-actions">
                            <button class="btn btn-small btn-primary apply-btn" data-asset-type="${asset.type}">
                                <i class="fas fa-pen"></i> Mohon Sekarang
                            </button>
                            <button class="btn btn-small btn-secondary details-btn" data-asset-id="${asset.id}">
                                <i class="fas fa-info-circle"></i> Butiran
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.apply-btn').forEach(button => {
                button.addEventListener('click', function() {
                    showApplicationModal(this.getAttribute('data-asset-type'));
                });
            });
            
            document.querySelectorAll('.details-btn').forEach(button => {
                button.addEventListener('click', function() {
                    showAssetDetails(this.getAttribute('data-asset-id'));
                });
            });
        }
        
        function showAssetDetails(assetId) {
            const asset = ASSETS_DATA.find(a => a.id == assetId);
            if (!asset) return;
            
            const vacancyRate = Math.round((asset.available / asset.total) * 100);
            const occupied = asset.total - asset.available;
            
            const modalContent = `
                <div style="padding: 2rem;">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 2rem;">
                        <div class="asset-icon ${asset.color}" style="width: 60px; height: 60px;">
                            <i class="${asset.icon}"></i>
                        </div>
                        <div>
                            <h3 style="color: var(--primary); margin-bottom: 5px;">${asset.name}</h3>
                            <p style="color: var(--gray);">${asset.description}</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 2rem;">
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 5px;">Jumlah Unit</div>
                            <div style="font-size: 1.8rem; font-weight: 700;">${asset.total}</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 5px;">Unit Tersedia</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--success);">${asset.available}</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 5px;">Unit Diduduki</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--dark);">${occupied}</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 5px;">Kadar Kekosongan</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--primary);">${vacancyRate}%</div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="margin-bottom: 1rem;">Lokasi Tersedia</h4>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                            ${asset.locations.map(location => `
                                <span style="background: rgba(26, 95, 122, 0.1); color: var(--primary); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">
                                    ${location}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="margin-bottom: 1rem;">Sewa Bulanan</h4>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">${asset.monthlyRent}</div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="showApplicationModal('${asset.type}'); closeModal('assetDetailsModal');" style="width: 100%;">
                        <i class="fas fa-pen"></i> Mohon Sekarang
                    </button>
                </div>
            `;
            
            showModal(`Butiran ${asset.name}`, modalContent, 'assetDetailsModal');
        }
        
        // ============================================
        // APPLICATION MANAGEMENT FUNCTIONS
        // ============================================
        
        function showApplicationModal(assetType = '') {
            const modal = document.getElementById('applicationModal');
            modal.style.display = 'flex';
            
            // Auto-fill user data
            document.getElementById('applicantName').value = currentUser.name;
            document.getElementById('applicantIC').value = '850505011234';
            document.getElementById('applicantPhone').value = '0123456789';
            document.getElementById('applicantEmail').value = currentUser.email;
            document.getElementById('applicantAddress').value = 'No 12, Jalan Melati, Taman Mawar, 43000 Kajang, Selangor';
            
            // Show auto-fill notification
            document.getElementById('autoFillNotification').style.display = 'flex';
            
            // Set asset type if provided
            if (assetType) {
                document.getElementById('modalAssetType').value = assetType;
                populateLocationDropdown(assetType);
            }
            
            // Set default start date (tomorrow)
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('startDate').value = tomorrow.toISOString().split('T')[0];
        }
        
        function populateLocationDropdown(assetType) {
            const locationSelect = document.getElementById('modalLocation');
            locationSelect.innerHTML = '<option value="">Sila Pilih Lokasi</option>';
            
            const asset = ASSETS_DATA.find(a => a.type === assetType);
            if (asset) {
                asset.locations.forEach((location, index) => {
                    const option = document.createElement('option');
                    option.value = location;
                    option.textContent = location;
                    locationSelect.appendChild(option);
                });
            }
        }
        
        function submitApplication(event) {
            event.preventDefault();
            
            // Get form values
            const application = {
                id: userApplications.length + 1,
                reference: `APP-${new Date().getFullYear()}-${String(userApplications.length + 1).padStart(3, '0')}`,
                assetType: document.getElementById('modalAssetType').value,
                assetName: document.getElementById('modalAssetType').options[document.getElementById('modalAssetType').selectedIndex].text,
                location: document.getElementById('modalLocation').value,
                applyDate: new Date().toISOString().split('T')[0],
                applicantName: document.getElementById('applicantName').value,
                status: 'processing',
                statusText: 'Dalam Proses'
            };
            
            // Save application
            userApplications.unshift(application);
            localStorage.setItem('user_applications', JSON.stringify(userApplications));
            
            // Update asset availability (AUTOCOUNT)
            updateAssetAvailability(application.assetType);
            
            // Update UI
            updateApplicationsTable();
            updateStatistics();
            
            // Show success modal
            showSuccessModal(application);
            
            // Close application modal
            closeModal('applicationModal');
            
            // Show notification
            showNotification('Permohonan berjaya dihantar!', 'success');
        }
        
        function updateAssetAvailability(assetType) {
            const asset = ASSETS_DATA.find(a => a.type === assetType);
            if (asset && asset.available > 0) {
                asset.available -= 1;
                
                // Update display
                updateStatistics();
                
                // Re-render assets if on assets page
                if (document.getElementById('assetsPage').style.display !== 'none') {
                    renderAssets();
                }
                
                // Show notification
                showNotification(`Kekosongan ${asset.name} telah dikemas kini`, 'info');
            }
        }
        
        function updateApplicationsTable() {
            const tbody = document.getElementById('userApplications');
            tbody.innerHTML = '';
            
            userApplications.forEach(app => {
                let statusBadge;
                switch(app.status) {
                    case 'approved':
                        statusBadge = '<span class="badge badge-success">Diluluskan</span>';
                        break;
                    case 'rejected':
                        statusBadge = '<span class="badge badge-danger">Ditolak</span>';
                        break;
                    default:
                        statusBadge = '<span class="badge badge-warning">Dalam Proses</span>';
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${app.reference}</td>
                    <td>${app.assetName}</td>
                    <td>${formatDate(app.applyDate)}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-small btn-outline view-application-btn" data-app-id="${app.id}">
                            <i class="fas fa-eye"></i> Lihat
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Add event listeners
            document.querySelectorAll('.view-application-btn').forEach(button => {
                button.addEventListener('click', function() {
                    showApplicationDetails(this.getAttribute('data-app-id'));
                });
            });
        }
        
        function showApplicationDetails(appId) {
            const app = userApplications.find(a => a.id == appId);
            if (!app) return;
            
            const modalContent = `
                <div style="padding: 2rem;">
                    <div style="background: var(--light); padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 style="color: var(--primary);">${app.reference}</h3>
                            ${app.status === 'approved' ? 
                                '<span class="badge badge-success">Diluluskan</span>' : 
                                app.status === 'rejected' ? 
                                '<span class="badge badge-danger">Ditolak</span>' : 
                                '<span class="badge badge-warning">Dalam Proses</span>'
                            }
                        </div>
                        <p style="color: var(--gray);">Tarikh Mohon: ${formatDate(app.applyDate)}</p>
                    </div>
                    
                    <div style="display: grid; gap: 1rem;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--gray);">Jenis Aset</label>
                            <div style="font-weight: 500;">${app.assetName}</div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--gray);">Lokasi</label>
                            <div style="font-weight: 500;">${app.location}</div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--gray);">Pemohon</label>
                            <div style="font-weight: 500;">${app.applicantName}</div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--gray);">Status Semasa</label>
                            <div style="font-weight: 500;">${app.statusText}</div>
                        </div>
                    </div>
                    
                    ${app.status === 'processing' ? `
                    <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--light-gray);">
                        <h4 style="margin-bottom: 1rem;">Anggaran Masa Proses</h4>
                        <div style="background: linear-gradient(to right, var(--primary), var(--accent)); height: 10px; border-radius: 5px; margin-bottom: 10px;"></div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: var(--gray);">
                            <span>Hari 1</span>
                            <span>Hari 14</span>
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9rem; color: var(--gray);">Permohonan akan diproses dalam tempoh 14 hari bekerja.</p>
                    </div>
                    ` : ''}
                    
                    <div style="margin-top: 2rem;">
                        <button class="btn" onclick="closeModal('applicationDetailsModal')" style="width: 100%;">
                            <i class="fas fa-times"></i> Tutup
                        </button>
                    </div>
                </div>
            `;
            
            showModal(`Butiran Permohonan`, modalContent, 'applicationDetailsModal');
        }
        
        function showSuccessModal(application) {
            document.getElementById('referenceNumber').textContent = application.reference;
            document.getElementById('successAssetType').textContent = application.assetName;
            document.getElementById('successLocation').textContent = application.location;
            document.getElementById('successDate').textContent = formatDate(application.applyDate);
            
            document.getElementById('successModal').style.display = 'flex';
        }
        
        // ============================================
        // REPORT FUNCTIONS
        // ============================================
        
        function showReport(reportType) {
            let reportTitle = '';
            let reportContent = '';
            
            switch(reportType) {
                case 'vacancy':
                    reportTitle = 'Laporan Kekosongan Aset';
                    reportContent = generateVacancyReport();
                    break;
                case 'revenue':
                    reportTitle = 'Laporan Hasil Sewaan';
                    reportContent = generateRevenueReport();
                    break;
                case 'applications':
                    reportTitle = 'Laporan Permohonan';
                    reportContent = generateApplicationsReport();
                    break;
                default:
                    reportTitle = 'Laporan';
                    reportContent = '<p>Pilih jenis laporan untuk melihat butiran.</p>';
            }
            
            document.getElementById('reportTitle').textContent = reportTitle;
            document.getElementById('reportContent').innerHTML = reportContent;
            
            // Also update report modal if needed
            document.getElementById('reportModalTitle').textContent = reportTitle;
            document.getElementById('reportModalContent').innerHTML = reportContent;
        }
        
        function generateVacancyReport() {
            let totalAssets = 0;
            let totalAvailable = 0;
            let totalOccupied = 0;
            
            ASSETS_DATA.forEach(asset => {
                totalAssets += asset.total;
                totalAvailable += asset.available;
                totalOccupied += (asset.total - asset.available);
            });
            
            const vacancyRate = Math.round((totalAvailable / totalAssets) * 100);
            
            return `
                <div style="padding: 1rem 0;">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 2rem;">
                        <div style="background: var(--light); padding: 1.5rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;">Jumlah Aset</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--primary);">${totalAssets}</div>
                        </div>
                        <div style="background: var(--light); padding: 1.5rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;">Kosong</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--success);">${totalAvailable}</div>
                        </div>
                        <div style="background: var(--light); padding: 1.5rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;">Diduduki</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--dark);">${totalOccupied}</div>
                        </div>
                    </div>
                    
                    <h4 style="margin-bottom: 1rem;">Kekosongan Mengikut Jenis Aset</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Jenis Aset</th>
                                <th>Jumlah Unit</th>
                                <th>Kosong</th>
                                <th>Diduduki</th>
                                <th>Kadar Kekosongan</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${ASSETS_DATA.map(asset => {
                                const occupied = asset.total - asset.available;
                                const rate = Math.round((asset.available / asset.total) * 100);
                                return `
                                    <tr>
                                        <td>${asset.name}</td>
                                        <td>${asset.total}</td>
                                        <td>${asset.available}</td>
                                        <td>${occupied}</td>
                                        <td>${rate}%</td>
                                    </tr>
                                `;
                            }).join('')}
                        </tbody>
                    </table>
                    
                    <div style="margin-top: 2rem;">
                        <h4 style="margin-bottom: 1rem;">Ringkasan</h4>
                        <div style="background: var(--light); padding: 1.5rem; border-radius: 10px;">
                            <p>Kadar kekosongan keseluruhan: <strong>${vacancyRate}%</strong></p>
                            <p>Jumlah unit kuarters kosong: <strong>${ASSETS_DATA.find(a => a.type === 'kuarters').available} unit</strong></p>
                            <p>Jenis aset dengan kekosongan tertinggi: <strong>Sewa Pejabat (${Math.round((ASSETS_DATA.find(a => a.type === 'pejabat').available / ASSETS_DATA.find(a => a.type === 'pejabat').total) * 100)}%)</strong></p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function generateRevenueReport() {
            return `
                <div style="padding: 1rem 0;">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 2rem;">
                        <div style="background: var(--light); padding: 1.5rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;">Hasil Bulan Ini</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--primary);">RM 45,200</div>
                        </div>
                        <div style="background: var(--light); padding: 1.5rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;">Hasil Tahunan</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--success);">RM 542,400</div>
                        </div>
                        <div style="background: var(--light); padding: 1.5rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;">Kadar Kutipan</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--dark);">94.5%</div>
                        </div>
                    </div>
                    
                    <h4 style="margin-bottom: 1rem;">Hasil Mengikut Jenis Aset</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Jenis Aset</th>
                                <th>Bilangan Unit</th>
                                <th>Sewa Bulanan</th>
                                <th>Jumlah Bulanan</th>
                                <th>Jumlah Tahunan</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Kuarters Kakitangan</td>
                                <td>132</td>
                                <td>RM 450</td>
                                <td>RM 59,400</td>
                                <td>RM 712,800</td>
                            </tr>
                            <tr>
                                <td>Sewa Pejabat</td>
                                <td>30</td>
                                <td>RM 2,500</td>
                                <td>RM 75,000</td>
                                <td>RM 900,000</td>
                            </tr>
                            <tr>
                                <td>Lot Kedai</td>
                                <td>49</td>
                                <td>RM 1,800</td>
                                <td>RM 88,200</td>
                                <td>RM 1,058,400</td>
                            </tr>
                            <tr>
                                <td>Bangunan Kompleks</td>
                                <td>8</td>
                                <td>RM 15,000</td>
                                <td>RM 120,000</td>
                                <td>RM 1,440,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }
        
        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        
        function updateStatistics() {
            // Calculate totals
            let totalAssets = 0;
            let totalAvailable = 0;
            let totalOccupied = 0;
            
            ASSETS_DATA.forEach(asset => {
                totalAssets += asset.total;
                totalAvailable += asset.available;
                totalOccupied += (asset.total - asset.available);
            });
            
            const vacancyRate = Math.round((totalAvailable / totalAssets) * 100);
            
            // Update dashboard statistics
            document.getElementById('totalAssets').textContent = totalAssets;
            document.getElementById('occupiedAssets').textContent = totalOccupied;
            document.getElementById('vacantAssets').textContent = totalAvailable;
            document.getElementById('vacancyRate').textContent = vacancyRate + '%';
            
            // Update quarters statistics
            const quarters = ASSETS_DATA.find(a => a.type === 'kuarters');
            if (quarters) {
                document.getElementById('totalQuarters').textContent = quarters.total;
                document.getElementById('availableQuarters').textContent = quarters.available;
                document.getElementById('quartersTotal').textContent = quarters.total;
                document.getElementById('quartersOccupied').textContent = quarters.total - quarters.available;
                document.getElementById('quartersVacant').textContent = quarters.available;
                document.getElementById('quartersRate').textContent = Math.round((quarters.available / quarters.total) * 100) + '%';
            }
            
            // Update application statistics
            document.getElementById('totalApplications').textContent = userApplications.length;
            document.getElementById('pendingApplications').textContent = userApplications.filter(app => app.status === 'processing').length;
            document.getElementById('approvedApplications').textContent = userApplications.filter(app => app.status === 'approved').length;
            document.getElementById('rejectedApplications').textContent = userApplications.filter(app => app.status === 'rejected').length;
        }
        
        function updateRecentActivities() {
            const tbody = document.getElementById('recentActivities');
            tbody.innerHTML = '';
            
            RECENT_ACTIVITIES.forEach(activity => {
                let statusBadge;
                switch(activity.status) {
                    case 'success':
                        statusBadge = '<span class="badge badge-success">Berjaya</span>';
                        break;
                    case 'error':
                        statusBadge = '<span class="badge badge-danger">Gagal</span>';
                        break;
                    default:
                        statusBadge = '<span class="badge">Info</span>';
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${formatDateTime(activity.date)}</td>
                    <td>${activity.activity}</td>
                    <td>${activity.details}</td>
                    <td>${statusBadge}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function updateUsersList() {
            const tbody = document.getElementById('usersList');
            tbody.innerHTML = '';
            
            SYSTEM_USERS.forEach(user => {
                const statusBadge = user.status === 'active' ? 
                    '<span class="badge badge-success">Aktif</span>' : 
                    '<span class="badge badge-danger">Tidak Aktif</span>';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.role}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-small btn-outline edit-user-btn" data-user-id="${user.id}">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function showModal(title, content, modalId = 'customModal') {
            // Create modal if it doesn't exist
            let modal = document.getElementById(modalId);
            if (!modal) {
                modal = document.createElement('div');
                modal.className = 'modal';
                modal.id = modalId;
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>${title}</h3>
                            <button class="close-modal" onclick="closeModal('${modalId}')">&times;</button>
                        </div>
                        <div class="modal-body" id="${modalId}Content"></div>
                    </div>
                `;
                document.body.appendChild(modal);
                
                // Close modal when clicking outside
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeModal(modalId);
                    }
                });
            }
            
            // Update content
            document.getElementById(`${modalId}Content`).innerHTML = content;
            
            // Show modal
            modal.style.display = 'flex';
        }
        
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            container.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 5000);
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ms-MY', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }
        
        function formatDateTime(dateTimeString) {
            const date = new Date(dateTimeString);
            return date.toLocaleDateString('ms-MY', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        function getInitials(name) {
            return name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
        }
        
        function loadDashboard() {
            // Set dashboard as active page
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector('[data-page="dashboard"]').classList.add('active');
            
            // Show dashboard page
            document.querySelectorAll('.page-content').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById('dashboardPage').style.display = 'block';
        }
        
        // ============================================
        // EVENT LISTENERS SETUP
        // ============================================
        
        function setupEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active state
                    document.querySelectorAll('.nav-links a').forEach(a => {
                        a.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Show corresponding page
                    const page = this.getAttribute('data-page');
                    document.querySelectorAll('.page-content').forEach(p => {
                        p.style.display = 'none';
                    });
                    document.getElementById(`${page}Page`).style.display = 'block';
                });
            });
            
            // Footer links
            document.querySelectorAll('.footer-links a[data-page]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    document.querySelector(`[data-page="${page}"]`).click();
                });
            });
            
            // Application form
            document.getElementById('rentalApplicationForm').addEventListener('submit', submitApplication);
            
            // Asset type change in modal
            document.getElementById('modalAssetType').addEventListener('change', function() {
                populateLocationDropdown(this.value);
            });
            
            // New application button
            document.getElementById('newApplicationBtn').addEventListener('click', () => showApplicationModal());
            document.getElementById('applyNowBtn').addEventListener('click', () => showApplicationModal());
            
            // Report cards
            document.querySelectorAll('.report-card').forEach(card => {
                card.addEventListener('click', function() {
                    const reportType = this.getAttribute('data-report');
                    showReport(reportType);
                    document.getElementById('reportModal').style.display = 'flex';
                });
            });
            
            // Close buttons
            document.getElementById('closeApplicationModal').addEventListener('click', () => {
                document.getElementById('applicationModal').style.display = 'none';
            });
            
            document.getElementById('cancelApplication').addEventListener('click', () => {
                document.getElementById('applicationModal').style.display = 'none';
            });
            
            document.getElementById('closeSuccessModal').addEventListener('click', () => {
                document.getElementById('successModal').style.display = 'none';
            });
            
            document.getElementById('closeSuccessBtn').addEventListener('click', () => {
                document.getElementById('successModal').style.display = 'none';
            });
            
            document.getElementById('viewApplicationBtn').addEventListener('click', () => {
                document.getElementById('successModal').style.display = 'none';
                document.querySelector('[data-page="application"]').click();
            });
            
            document.getElementById('closeReportModal').addEventListener('click', () => {
                document.getElementById('reportModal').style.display = 'none';
            });
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('Adakah anda pasti ingin log keluar?')) {
                    sessionStorage.removeItem(CURRENT_USER_KEY);
                    localStorage.removeItem(USER_SESSION_KEY);
                    window.location.href = 'login.html';
                }
            });
            
            // Filter buttons
            document.getElementById('filterAll').addEventListener('click', () => {
                renderAssets();
            });
            
            document.getElementById('filterAvailable').addEventListener('click', () => {
                const availableAssets = ASSETS_DATA.filter(asset => asset.available > 0);
                const container = document.getElementById('assetsContainer');
                container.innerHTML = '';
                
                if (availableAssets.length === 0) {
                    container.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                            <i class="fas fa-info-circle" style="font-size: 3rem; color: var(--gray); margin-bottom: 1rem;"></i>
                            <h3>Tiada Aset Tersedia</h3>
                            <p>Semua aset sedang diduduki. Sila cuba lagi kemudian.</p>
                        </div>
                    `;
                    return;
                }
                
                availableAssets.forEach(asset => {
                    // Similar rendering logic as renderAssets()
                    // Simplified for brevity
                    const card = document.createElement('div');
                    card.className = 'asset-card fade-in';
                    card.innerHTML = `
                        <div class="asset-header">
                            <div class="asset-icon ${asset.color}">
                                <i class="${asset.icon}"></i>
                            </div>
                            <div class="asset-info">
                                <h3>${asset.name}</h3>
                                <p>${asset.available} unit tersedia</p>
                            </div>
                        </div>
                        <div class="asset-details">
                            <div class="vacancy-rate">
                                Sewa Bulanan: <span class="rate">${asset.monthlyRent}</span>
                            </div>
                            <div class="asset-actions">
                                <button class="btn btn-small btn-primary apply-btn" data-asset-type="${asset.type}">
                                    <i class="fas fa-pen"></i> Mohon Sekarang
                                </button>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
                
                // Re-attach event listeners
                document.querySelectorAll('.apply-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        showApplicationModal(this.getAttribute('data-asset-type'));
                    });
                });
            });
            
            // Generate report button
            document.getElementById('generateReportBtn').addEventListener('click', function() {
                showNotification('Laporan sedang dijana...', 'info');
                setTimeout(() => {
                    showNotification('Laporan berjaya dieksport!', 'success');
                }, 1500);
            });
            
            // Save settings button
            document.getElementById('saveSettingsBtn').addEventListener('click', function() {
                showNotification('Tetapan berjaya disimpan!', 'success');
            });
            
            // Add user button
            document.getElementById('addUserBtn').addEventListener('click', function() {
                showModal('Tambah Pengguna Baru', `
                    <div style="padding: 2rem;">
                        <div class="form-group">
                            <label>Nama Penuh</label>
                            <input type="text" class="form-control" placeholder="Masukkan nama penuh">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" class="form-control" placeholder="cth: user@email.com">
                        </div>
                        <div class="form-group">
                            <label>Peranan</label>
                            <select class="form-control">
                                <option value="admin">Administrator</option>
                                <option value="manager">Pengurus</option>
                                <option value="staff">Staf</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Kata Laluan</label>
                            <input type="password" class="form-control" placeholder="Masukkan kata laluan">
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                            <i class="fas fa-user-plus"></i> Tambah Pengguna
                        </button>
                    </div>
                `, 'addUserModal');
            });
            
            // Vacancy report button
            document.getElementById('vacancyReportBtn').addEventListener('click', function() {
                showReport('vacancy');
                document.getElementById('reportModal').style.display = 'flex';
            });
            
            // Print report button
            document.getElementById('printReportBtn').addEventListener('click', function() {
                window.print();
            });
            
            // Export report button
            document.getElementById('exportReportBtn').addEventListener('click', function() {
                showNotification('Laporan sedang dieksport ke PDF...', 'info');
                setTimeout(() => {
                    showNotification('Laporan berjaya dieksport!', 'success');
                }, 1500);
            });
            
            // Report period change
            document.getElementById('reportPeriod').addEventListener('change', function() {
                showNotification('Laporan dikemas kini untuk tempoh: ' + this.options[this.selectedIndex].text, 'info');
            });
        }
        
        // ============================================
        // GLOBAL FUNCTIONS
        // ============================================
        
        window.showApplicationModal = showApplicationModal;
        window.closeModal = closeModal;
        window.showReport = showReport;
        
        // Demo login function (for testing)
        window.demoLogin = function() {
            currentUser = {
                id: 1,
                name: "Ahmad bin Ali",
                email: "ahmad@email.com",
                role: "Kakitangan Kerajaan",
                department: "Jabatan Kerja Raya",
                isLoggedIn: true
            };
            
            sessionStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
            localStorage.setItem(USER_SESSION_KEY, JSON.stringify(currentUser));
            
            updateUserInterface();
            showNotification('Log masuk demo berjaya!', 'success');
        };
        
        // Add demo login shortcut (Ctrl+Shift+L)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'L') {
                e.preventDefault();
                demoLogin();
            }
        });
    </script>
</body>
</html>
