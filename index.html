<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Aset Sewaan Kerajaan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5f7a;
            --secondary: #57c5b6;
            --accent: #159895;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ===== AUTHENTICATION PAGES ===== */
        .auth-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            padding: 20px;
        }
        
        .auth-container {
            display: flex;
            width: 100%;
            max-width: 1000px;
            background-color: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }
        
        .auth-left {
            flex: 1;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 50px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .auth-left:before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
        }
        
        .auth-right {
            flex: 1;
            padding: 50px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .auth-logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }
        
        .auth-logo i {
            font-size: 2.5rem;
        }
        
        .auth-logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .auth-logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .auth-features {
            position: relative;
            z-index: 1;
            margin-top: 30px;
        }
        
        .auth-feature {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .auth-feature-icon {
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }
        
        .auth-feature-text h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .auth-feature-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .auth-form-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .auth-title {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .auth-title h2 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .auth-title p {
            color: var(--gray);
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .auth-tab {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray);
            cursor: pointer;
            position: relative;
            transition: color 0.3s;
        }
        
        .auth-tab.active {
            color: var(--primary);
        }
        
        .auth-tab.active:after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .auth-form-group {
            margin-bottom: 20px;
        }
        
        .auth-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .required:after {
            content: '*';
            color: var(--danger);
            margin-left: 3px;
        }
        
        .auth-input-with-icon {
            position: relative;
        }
        
        .auth-input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 1.1rem;
        }
        
        .auth-input {
            width: 100%;
            padding: 14px 15px 14px 45px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .auth-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
        }
        
        .auth-password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.1rem;
        }
        
        .auth-form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            font-size: 0.9rem;
        }
        
        .auth-remember {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .auth-forgot {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .auth-forgot:hover {
            text-decoration: underline;
        }
        
        .auth-btn {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .auth-btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .auth-btn-primary:hover {
            background-color: #144c63;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .auth-divider {
            text-align: center;
            margin: 25px 0;
            position: relative;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .auth-divider:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 45%;
            height: 1px;
            background-color: var(--light-gray);
        }
        
        .auth-divider:after {
            content: '';
            position: absolute;
            top: 50%;
            right: 0;
            width: 45%;
            height: 1px;
            background-color: var(--light-gray);
        }
        
        .auth-footer {
            text-align: center;
            margin-top: 30px;
            color: var(--gray);
            font-size: 0.95rem;
        }
        
        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }
        
        .auth-footer a:hover {
            text-decoration: underline;
        }
        
        .user-type-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .user-type-option {
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .user-type-option:hover {
            border-color: var(--secondary);
            background-color: rgba(87, 197, 182, 0.05);
        }
        
        .user-type-option.selected {
            border-color: var(--primary);
            background-color: rgba(26, 95, 122, 0.05);
        }
        
        .user-type-option i {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .user-type-option h4 {
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .user-type-option p {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .auth-success {
            text-align: center;
            padding: 30px;
            display: none;
        }
        
        .auth-success.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .auth-success-icon {
            width: 80px;
            height: 80px;
            background-color: rgba(40, 167, 69, 0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            color: var(--success);
        }
        
        /* ===== MAIN APPLICATION (After Login) ===== */
        .app-container {
            display: none;
        }
        
        /* Header */
        .app-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .app-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .app-logo i {
            font-size: 2.2rem;
        }
        
        .app-logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .app-logo-text p {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        .header-stats {
            display: flex;
            gap: 30px;
        }
        
        .header-stat {
            text-align: center;
        }
        
        .header-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
        }
        
        .header-stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        .user-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 6px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: white;
            color: var(--primary);
        }
        
        .btn-primary:hover {
            background-color: var(--light);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #46a99a;
        }
        
        .btn-outline {
            background-color: transparent;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 30px;
            cursor: pointer;
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            background-color: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .user-name {
            font-weight: 500;
        }
        
        .user-badge {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        /* Navigation */
        .app-nav {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 5px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 15px 20px;
            display: inline-block;
            transition: all 0.3s;
            border-radius: 5px;
        }
        
        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(26, 95, 122, 0.1);
            color: var(--primary);
        }
        
        /* Dashboard */
        .app-main {
            padding: 2rem 0;
        }
        
        .welcome-banner {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .welcome-content h2 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .welcome-content p {
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .user-type-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        /* Asset Grid */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .section-header h2 {
            font-size: 1.8rem;
            color: var(--primary);
            position: relative;
            padding-left: 15px;
        }
        
        .section-header h2:before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            height: 80%;
            width: 5px;
            background-color: var(--secondary);
            border-radius: 3px;
        }
        
        .assets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 3rem;
        }
        
        .asset-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--light-gray);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .asset-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .asset-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-available {
            background-color: rgba(40, 167, 69, 0.15);
            color: var(--success);
        }
        
        .status-limited {
            background-color: rgba(255, 193, 7, 0.15);
            color: #b88b00;
        }
        
        .status-unavailable {
            background-color: rgba(220, 53, 69, 0.15);
            color: var(--danger);
        }
        
        .asset-image {
            height: 180px;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            position: relative;
        }
        
        .asset-image i {
            font-size: 4rem;
            opacity: 0.5;
        }
        
        .asset-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .asset-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .asset-location {
            color: var(--gray);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .asset-details {
            margin-bottom: 20px;
            flex-grow: 1;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .detail-label {
            color: var(--gray);
        }
        
        .detail-value {
            font-weight: 500;
        }
        
        .asset-actions {
            margin-top: auto;
        }
        
        .btn-block {
            width: 100%;
            justify-content: center;
        }
        
        /* Application Status */
        .status-section {
            background-color: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 3rem;
        }
        
        .status-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--light);
            border-left: 5px solid var(--primary);
        }
        
        .status-info h4 {
            margin-bottom: 5px;
        }
        
        .status-info p {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .badge-processing {
            background-color: rgba(255, 193, 7, 0.15);
            color: #b88b00;
        }
        
        .badge-approved {
            background-color: rgba(40, 167, 69, 0.15);
            color: var(--success);
        }
        
        .badge-rejected {
            background-color: rgba(220, 53, 69, 0.15);
            color: var(--danger);
        }
        
        /* Search & Filter */
        .search-box {
            background-color: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
        }
        
        .search-form {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .search-form select, .search-form input {
            flex: 1;
            min-width: 200px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            padding: 1.5rem 2rem;
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            font-size: 1.4rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .close-modal:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group.full-width {
            grid-column: 1 / span 2;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .modal-footer {
            padding: 1.5rem 2rem;
            background-color: var(--light);
            border-top: 1px solid var(--light-gray);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        /* Auto-fill Notification */
        .auto-fill-notification {
            background-color: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
            color: var(--success);
            padding: 10px 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            display: none;
        }
        
        .auto-fill-notification.active {
            display: flex;
            animation: fadeIn 0.5s ease;
        }
        
        /* Success Modal */
        .success-modal {
            text-align: center;
            padding: 3rem;
        }
        
        .success-icon {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 1rem;
        }
        
        /* Profile Dropdown */
        .profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            min-width: 200px;
            display: none;
            z-index: 1000;
        }
        
        .profile-dropdown.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .profile-dropdown a {
            display: block;
            padding: 12px 20px;
            color: var(--dark);
            text-decoration: none;
            transition: background 0.3s;
        }
        
        .profile-dropdown a:hover {
            background-color: var(--light);
        }
        
        /* Footer */
        .app-footer {
            background-color: var(--dark);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .footer-section h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--secondary);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .auth-container {
                flex-direction: column;
                min-height: auto;
            }
            
            .auth-left, .auth-right {
                padding: 30px;
            }
        }
        
        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-stats {
                order: 3;
                width: 100%;
                justify-content: center;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 15px;
                padding: 15px 0;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .assets-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-group.full-width {
                grid-column: 1;
            }
        }
        
        @media (max-width: 768px) {
            .user-type-selection {
                grid-template-columns: 1fr;
            }
            
            .search-form {
                flex-direction: column;
            }
            
            .search-form select, .search-form input {
                min-width: 100%;
            }
            
            .welcome-banner {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
        }
        
        @media (max-width: 576px) {
            .assets-grid {
                grid-template-columns: 1fr;
            }
            
            .user-section {
                flex-direction: column;
                gap: 10px;
            }
            
            .modal-body {
                padding: 1.5rem;
            }
        }
        
        /* Page Content */
        .page-content {
            display: none;
        }
        
        .page-content.active {
            display: block;
        }
        
        /* Category Navigation */
        .category-nav {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .category-list {
            display: flex;
            list-style: none;
            overflow-x: auto;
            padding: 1rem 0;
            gap: 5px;
        }
        
        .category-list li {
            flex-shrink: 0;
        }
        
        .category-list a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 30px;
            display: inline-block;
            transition: all 0.3s;
            border: 1px solid var(--light-gray);
        }
        
        .category-list a:hover, .category-list a.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }
        
        .dashboard-card {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1rem;
        }
        
        .card-icon {
            width: 50px;
            height: 50px;
            background-color: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        .card-content h3 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .card-content p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Validation Messages */
        .validation-message {
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }
        
        .validation-message.error {
            color: var(--danger);
            display: block;
        }
        
        .validation-message.success {
            color: var(--success);
            display: block;
        }
    </style>
</head>
<body>
    <!-- Authentication Pages -->
    <div class="auth-page" id="authPage">
        <div class="auth-container">
            <div class="auth-left">
                <div class="auth-logo">
                    <i class="fas fa-building"></i>
                    <div class="auth-logo-text">
                        <h1>Sistem Aset Sewaan Kerajaan</h1>
                        <p>Kementerian/Kerajaan Negeri</p>
                    </div>
                </div>
                
                <div class="auth-features">
                    <div class="auth-feature">
                        <div class="auth-feature-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="auth-feature-text">
                            <h4>181 Unit Kuarters</h4>
                            <p>49 unit masih tersedia untuk disewa</p>
                        </div>
                    </div>
                    
                    <div class="auth-feature">
                        <div class="auth-feature-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="auth-feature-text">
                            <h4>Permohonan Online</h4>
                            <p>Mohon sewaan aset secara digital</p>
                        </div>
                    </div>
                    
                    <div class="auth-feature">
                        <div class="auth-feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="auth-feature-text">
                            <h4>Autocount Real-time</h4>
                            <p>Status kekosongan dikemas kini automatik</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="auth-right">
                <div class="auth-form-container">
                    <!-- Tabs -->
                    <div class="auth-tabs">
                        <button class="auth-tab active" id="loginTab">Log Masuk</button>
                        <button class="auth-tab" id="registerTab">Daftar Akaun</button>
                    </div>
                    
                    <!-- Login Form -->
                    <form class="auth-form active" id="loginForm">
                        <div class="auth-title">
                            <h2>Log Masuk</h2>
                            <p>Sila masukkan maklumat akaun anda</p>
                        </div>
                        
                        <div class="auth-form-group">
                            <label for="loginEmail" class="required">Email atau No. KP</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-user auth-input-icon"></i>
                                <input type="text" id="loginEmail" class="auth-input" placeholder="cth: user@email.com atau 800101011234" required>
                            </div>
                            <div class="validation-message" id="loginEmailError"></div>
                        </div>
                        
                        <div class="auth-form-group">
                            <label for="loginPassword" class="required">Kata Laluan</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-lock auth-input-icon"></i>
                                <input type="password" id="loginPassword" class="auth-input" placeholder="Masukkan kata laluan" required>
                                <button type="button" class="auth-password-toggle" id="toggleLoginPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="validation-message" id="loginPasswordError"></div>
                        </div>
                        
                        <div class="auth-form-options">
                            <div class="auth-remember">
                                <input type="checkbox" id="rememberMe">
                                <label for="rememberMe">Ingat saya</label>
                            </div>
                            <a href="#" class="auth-forgot" id="forgotPasswordLink">Lupa kata laluan?</a>
                        </div>
                        
                        <button type="submit" class="auth-btn auth-btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Log Masuk
                        </button>
                        
                        <div class="auth-divider">atau</div>
                        
                        <button type="button" class="auth-btn" id="demoLoginBtn" style="background-color: #f8f9fa; color: var(--dark);">
                            <i class="fas fa-user-check"></i> Demo Login (Kakitangan)
                        </button>
                        
                        <div class="auth-footer">
                            Tiada akaun? <a href="#" id="goToRegister">Daftar di sini</a>
                        </div>
                    </form>
                    
                    <!-- Register Form -->
                    <form class="auth-form" id="registerForm">
                        <div class="auth-title">
                            <h2>Daftar Akaun Baru</h2>
                            <p>Sila isi maklumat di bawah</p>
                        </div>
                        
                        <!-- User Type Selection -->
                        <div class="user-type-selection">
                            <div class="user-type-option selected" data-type="staff">
                                <i class="fas fa-user-tie"></i>
                                <h4>Kakitangan Kerajaan</h4>
                                <p>Untuk permohonan kuarters</p>
                            </div>
                            <div class="user-type-option" data-type="public">
                                <i class="fas fa-users"></i>
                                <h4>Orang Awam</h4>
                                <p>Untuk sewaan aset lain</p>
                            </div>
                        </div>
                        <input type="hidden" id="userType" value="staff">
                        
                        <div class="auth-form-group">
                            <label for="registerName" class="required">Nama Penuh</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-user auth-input-icon"></i>
                                <input type="text" id="registerName" class="auth-input" placeholder="Masukkan nama penuh" required>
                            </div>
                            <div class="validation-message" id="registerNameError"></div>
                        </div>
                        
                        <div class="auth-form-group">
                            <label for="registerIC" class="required">No. Kad Pengenalan</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-id-card auth-input-icon"></i>
                                <input type="text" id="registerIC" class="auth-input" placeholder="cth: 800101011234" required>
                            </div>
                            <div class="validation-message" id="registerICError"></div>
                        </div>
                        
                        <div class="auth-form-group">
                            <label for="registerEmail" class="required">Alamat Email</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-envelope auth-input-icon"></i>
                                <input type="email" id="registerEmail" class="auth-input" placeholder="cth: user@email.com" required>
                            </div>
                            <div class="validation-message" id="registerEmailError"></div>
                        </div>
                        
                        <div class="auth-form-group">
                            <label for="registerPhone" class="required">No. Telefon</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-phone auth-input-icon"></i>
                                <input type="tel" id="registerPhone" class="auth-input" placeholder="cth: 0123456789" required>
                            </div>
                            <div class="validation-message" id="registerPhoneError"></div>
                        </div>
                        
                        <div class="auth-form-group">
                            <label for="registerPassword" class="required">Kata Laluan</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-lock auth-input-icon"></i>
                                <input type="password" id="registerPassword" class="auth-input" placeholder="Minimum 8 aksara" required>
                                <button type="button" class="auth-password-toggle" id="toggleRegisterPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="validation-message" id="registerPasswordError"></div>
                        </div>
                        
                        <div class="auth-form-group">
                            <label for="registerConfirmPassword" class="required">Sahkan Kata Laluan</label>
                            <div class="auth-input-with-icon">
                                <i class="fas fa-lock auth-input-icon"></i>
                                <input type="password" id="registerConfirmPassword" class="auth-input" placeholder="Masukkan semula kata laluan" required>
                                <button type="button" class="auth-password-toggle" id="toggleConfirmPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="validation-message" id="registerConfirmPasswordError"></div>
                        </div>
                        
                        <div class="auth-form-group">
                            <div style="display: flex; align-items: start; gap: 10px;">
                                <input type="checkbox" id="agreeTerms" required style="margin-top: 3px;">
                                <label for="agreeTerms" style="margin-bottom: 0; font-size: 0.9rem;">
                                    Saya bersetuju dengan <a href="#" style="color: var(--primary);">Terma & Syatan</a> dan <a href="#" style="color: var(--primary);">Dasar Privasi</a>
                                </label>
                            </div>
                            <div class="validation-message" id="termsError"></div>
                        </div>
                        
                        <button type="submit" class="auth-btn auth-btn-primary">
                            <i class="fas fa-user-plus"></i> Daftar Akaun
                        </button>
                        
                        <div class="auth-footer">
                            Sudah ada akaun? <a href="#" id="goToLogin">Log masuk di sini</a>
                        </div>
                    </form>
                    
                    <!-- Success Message -->
                    <div class="auth-success" id="successMessage">
                        <div class="auth-success-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <h2>Pendaftaran Berjaya!</h2>
                        <p>Akaun anda telah berjaya didaftarkan. Sila log masuk untuk menggunakan sistem.</p>
                        <button class="auth-btn auth-btn-primary" id="goToLoginFromSuccess" style="margin-top: 20px;">
                            <i class="fas fa-sign-in-alt"></i> Log Masuk Sekarang
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Application (After Login) -->
    <div class="app-container" id="appContainer">
        <!-- Header -->
        <header class="app-header">
            <div class="container header-content">
                <div class="app-logo">
                    <i class="fas fa-building"></i>
                    <div class="app-logo-text">
                        <h1>Portal Sewaan Aset</h1>
                        <p>Selamat datang, <span id="headerUserName">Pengguna</span></p>
                    </div>
                </div>
                
                <div class="header-stats">
                    <div class="header-stat">
                        <div class="header-stat-value" id="headerTotalQuarters">181</div>
                        <div class="header-stat-label">Jumlah Kuarters</div>
                    </div>
                    <div class="header-stat">
                        <div class="header-stat-value" id="headerAvailableQuarters">49</div>
                        <div class="header-stat-label">Kuarters Kosong</div>
                    </div>
                    <div class="header-stat">
                        <div class="header-stat-value">8</div>
                        <div class="header-stat-label">Jenis Aset</div>
                    </div>
                </div>
                
                <div class="user-section">
                    <div class="user-profile" id="userProfileBtn">
                        <div class="user-avatar" id="userAvatar">P</div>
                        <div>
                            <div class="user-name" id="userName">Pengguna</div>
                            <div class="user-badge" id="userTypeBadge">Kakitangan</div>
                        </div>
                    </div>
                    <button class="btn btn-outline" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Log Keluar
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Navigation -->
        <nav class="app-nav">
            <div class="container nav-container">
                <ul class="nav-links">
                    <li><a href="#" class="active" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="#" data-page="assets"><i class="fas fa-building"></i> Aset Tersedia</a></li>
                    <li><a href="#" data-page="application"><i class="fas fa-file-alt"></i> Permohonan Saya</a></li>
                    <li><a href="#" data-page="profile"><i class="fas fa-user"></i> Profil Saya</a></li>
                </ul>
                
                <div class="quick-actions">
                    <button class="btn btn-primary" id="newApplicationBtn">
                        <i class="fas fa-plus"></i> Mohon Baru
                    </button>
                </div>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="app-main">
            <div class="container">
                <!-- Dashboard Page -->
                <div id="dashboardPage" class="page-content active">
                    <div class="welcome-banner">
                        <div class="welcome-content">
                            <h2 id="welcomeTitle">Selamat Datang!</h2>
                            <p id="welcomeMessage">Portal sewaan aset kerajaan untuk kakitangan dan orang awam.</p>
                            <span class="user-type-badge" id="userWelcomeBadge">Kakitangan Kerajaan</span>
                        </div>
                        <div style="font-size: 4rem; color: var(--secondary); opacity: 0.7;">
                            <i class="fas fa-hand-wave"></i>
                        </div>
                    </div>
                    
                    <div class="dashboard-cards">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="card-content">
                                    <h3 id="dashboardTotalQuarters">181</h3>
                                    <p>Jumlah Kuarters</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <div class="card-icon" style="background-color: var(--success);">
                                    <i class="fas fa-door-open"></i>
                                </div>
                                <div class="card-content">
                                    <h3 id="dashboardAvailableQuarters">49</h3>
                                    <p>Kuarters Tersedia</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <div class="card-icon" style="background-color: var(--accent);">
                                    <i class="fas fa-file-alt"></i>
                                </div>
                                <div class="card-content">
                                    <h3 id="dashboardMyApplications">0</h3>
                                    <p>Permohonan Saya</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <div class="card-icon" style="background-color: var(--warning);">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="card-content">
                                    <h3 id="dashboardPending">0</h3>
                                    <p>Dalam Proses</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Access -->
                    <div class="section-header">
                        <h2>Akses Pantas</h2>
                    </div>
                    
                    <div class="assets-grid">
                        <div class="asset-card">
                            <div class="asset-image" style="background-color: #9b59b620; color: #9b59b6;">
                                <i class="fas fa-home"></i>
                                <div class="asset-status status-available">49 Tersedia</div>
                            </div>
                            <div class="asset-content">
                                <h3 class="asset-title">Kuarters Kakitangan</h3>
                                <div class="asset-location">
                                    <i class="fas fa-map-marker-alt"></i> 6 Lokasi Berbeza
                                </div>
                                <div class="asset-details">
                                    <p>Tempat tinggal untuk kakitangan kerajaan dengan kemudahan lengkap.</p>
                                    <div class="detail-item">
                                        <span class="detail-label">Sewa Bulanan:</span>
                                        <span class="detail-value">RM 450</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Tempoh:</span>
                                        <span class="detail-value">36 Bulan</span>
                                    </div>
                                </div>
                                <div class="asset-actions">
                                    <button class="btn btn-primary btn-block apply-now-btn" data-asset-type="kuarters">
                                        <i class="fas fa-pen"></i> Mohon Sekarang
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="asset-card">
                            <div class="asset-image" style="background-color: #3498db20; color: #3498db;">
                                <i class="fas fa-building"></i>
                                <div class="asset-status status-available">12 Tersedia</div>
                            </div>
                            <div class="asset-content">
                                <h3 class="asset-title">Sewa Pejabat</h3>
                                <div class="asset-location">
                                    <i class="fas fa-map-marker-alt"></i> 4 Lokasi Berbeza
                                </div>
                                <div class="asset-details">
                                    <p>Ruang pejabat strategik untuk organisasi dan syarikat.</p>
                                    <div class="detail-item">
                                        <span class="detail-label">Sewa Bulanan:</span>
                                        <span class="detail-value">RM 2,500</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Tempoh:</span>
                                        <span class="detail-value">12-60 Bulan</span>
                                    </div>
                                </div>
                                <div class="asset-actions">
                                    <button class="btn btn-primary btn-block apply-now-btn" data-asset-type="pejabat">
                                        <i class="fas fa-pen"></i> Mohon Sekarang
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Assets Page -->
                <div id="assetsPage" class="page-content">
                    <div class="section-header">
                        <h2>Aset Tersedia Untuk Disewa</h2>
                        <div>
                            <span id="availableCount">49</span> daripada <span id="totalCount">181</span> unit kuarters tersedia
                        </div>
                    </div>
                    
                    <!-- Search Box -->
                    <div class="search-box">
                        <div class="search-form">
                            <select id="searchType">
                                <option value="">Semua Jenis Aset</option>
                                <option value="kuarters">Kuarters Kakitangan</option>
                                <option value="pejabat">Pejabat</option>
                                <option value="tanah">Tanah Lot</option>
                                <option value="rumah_rehat">Rumah Rehat</option>
                                <option value="kedai">Lot Kedai</option>
                                <option value="bilik">Bilik Sejuk</option>
                                <option value="slipway">Slipway</option>
                                <option value="pphp">PPHP</option>
                                <option value="kompleks">Kompleks</option>
                                <option value="pasar">Pasar Nelayan</option>
                                <option value="akuakultur">Akuakultur</option>
                                <option value="ccdc">CCDC</option>
                                <option value="jeti">Jeti</option>
                            </select>
                            <select id="searchLocation">
                                <option value="">Semua Lokasi</option>
                                <option value="perlis">Perlis</option>
                                <option value="kedah">Kedah</option>
                                <option value="perak">Perak</option>
                                <option value="selangor">Selangor</option>
                                <option value="ngerisembilan">Negeri Sembilan</option>
                                <option value="johor">Johor</option>
                                <option value="pahang">Pahang</option>
                                <option value="terengganu">Terengganu</option>
                                <option value="kelantan">Kelantan</option>
                                <option value="sarawak">Sarawak</option>
                                <option value="sabah">Sabah</option>
                            </select>
                            <button class="btn btn-primary" id="searchBtn">
                                <i class="fas fa-search"></i> Cari
                            </button>
                        </div>
                    </div>
                    
                    <!-- Category Navigation -->
                    <nav class="category-nav">
                        <ul class="category-list" id="categoryList">
                            <!-- Will be populated by JavaScript -->
                        </ul>
                    </nav>
                    
                    <!-- Assets Grid -->
                    <div class="assets-grid" id="assetsGrid">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Application Page -->
                <div id="applicationPage" class="page-content">
                    <div class="section-header">
                        <h2>Permohonan Saya</h2>
                        <button class="btn btn-primary" id="applyNewBtn">
                            <i class="fas fa-plus"></i> Permohonan Baru
                        </button>
                    </div>
                    
                    <div class="status-section">
                        <div class="status-list" id="applicationStatus">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Profile Page -->
                <div id="profilePage" class="page-content">
                    <div class="section-header">
                        <h2>Profil Saya</h2>
                    </div>
                    
                    <div class="dashboard-card">
                        <div style="display: flex; align-items: center; gap: 30px; margin-bottom: 2rem;">
                            <div style="width: 100px; height: 100px; background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); 
                                border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: white; font-weight: bold;" id="profileAvatar">
                                P
                            </div>
                            <div>
                                <h3 style="color: var(--primary); margin-bottom: 5px;" id="profileName">Nama Pengguna</h3>
                                <p style="color: var(--gray); margin-bottom: 5px;" id="profileEmail">email@example.com</p>
                                <span class="user-type-badge" id="profileUserType">Kakitangan Kerajaan</span>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: var(--gray);">No. Kad Pengenalan</label>
                                <div style="font-weight: 500;" id="profileIC">000000000000</div>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: var(--gray);">No. Telefon</label>
                                <div style="font-weight: 500;" id="profilePhone">0123456789</div>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: var(--gray);">Jabatan/Agensi</label>
                                <div style="font-weight: 500;" id="profileDepartment">Tiada</div>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 5px; color: var(--gray);">Ahli Sejak</label>
                                <div style="font-weight: 500;" id="profileSince">-</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--light-gray);">
                            <button class="btn btn-primary" id="editProfileBtn">
                                <i class="fas fa-user-edit"></i> Kemaskini Profil
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="app-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>Portal Sewaan Aset</h3>
                        <p>Sistem pengurusan sewaan aset kerajaan yang efisien dan telus.</p>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Hubungi Kami</h3>
                        <ul class="footer-links">
                            <li><i class="fas fa-phone"></i> 03-8888 1234</li>
                            <li><i class="fas fa-envelope"></i> aset@kerajaan.gov.my</li>
                            <li><i class="fas fa-map-marker-alt"></i> Aras 5, Menara Kerajaan</li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Pautan Pantas</h3>
                        <ul class="footer-links">
                            <li><a href="#" data-page="dashboard">Dashboard</a></li>
                            <li><a href="#" data-page="assets">Aset Tersedia</a></li>
                            <li><a href="#" data-page="application">Permohonan Saya</a></li>
                            <li><a href="#" data-page="profile">Profil Saya</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="copyright">
                    &copy; 2023 Portal Sewaan Aset Kerajaan. Hak Cipta Terpelihara.
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Application Modal -->
    <div class="modal" id="applicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-file-alt"></i> Borang Permohonan Sewaan</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            
            <div class="auto-fill-notification" id="autoFillNotification">
                <i class="fas fa-check-circle"></i>
                <span>Maklumat anda telah diisi automatik dari profil.</span>
            </div>
            
            <form id="rentalApplicationForm">
                <div class="modal-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="applicantName" class="required">Nama Penuh</label>
                            <input type="text" id="applicantName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="applicantIC" class="required">No. Kad Pengenalan</label>
                            <input type="text" id="applicantIC" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="applicantPhone" class="required">No. Telefon</label>
                            <input type="tel" id="applicantPhone" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="applicantEmail" class="required">Email</label>
                            <input type="email" id="applicantEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="applicantAddress" class="required">Alamat Tempat Tinggal</label>
                        <textarea id="applicantAddress" class="form-control" required></textarea>
                    </div>
                 
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 1.5rem;">
    <div class="form-group">
        <label for="assetType" class="form-label">Jenis Aset </label>
        <select id="assetType" class="form-control" required>
            <option value="" selected disabled>-- Sila pilih jenis aset --</option>
            <option value="kuarters">Kuarters</option>
            <option value="pejabat">Pejabat</option>
            <option value="kedai">Lot Kedai</option>
            <option value="tanah">Tanah</option>
            <option value="rumah_rehat">Rumah Rehat</option>
            <option value="bilik">Bilik Sejuk</option>
            <option value="slipway">Slipway</option>
            <option value="pphp">PPHP</option>
            <option value="kompleks">Kompleks</option>
            <option value="pasar">Pasar Nelayan</option>
            <option value="akuakultur">Akuakultur</option>
            <option value="ccdc">CCDC</option>
            <option value="jeti">Jeti</option>
        </select>
       <!-- <small class="form-text text-muted">Pilih jenis aset yang ingin dipohon</small>-->
    </div>
    
    <div class="form-group">
        <label for="assetLocation" class="form-label">Lokasi </label>
        <div id="locationContainer">
            <!-- Dropdown lokasi -->
            <select id="assetLocation" class="form-control" required style="display: none;">
                <!-- Akan diisi secara automatik -->
            </select>
            
            <!-- Status messages -->
            <div id="statusMessage">
                <div id="initialMessage" class="status-initial">
                    <i class="fas fa-info-circle"></i> Pilih jenis aset terlebih dahulu
                </div>
                <div id="loadingMessage" class="status-loading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i> Sedang memuatkan lokasi...
                </div>
                <div id="noVacancyMessage" class="status-no-vacancy" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i> Tiada kekosongan tersedia
                </div>
            </div>
        </div>
        <!--<small class="form-text text-muted">Hanya lokasi dengan kekosongan akan dipaparkan</small>-->
    </div>
</div>

<script>
// Data kekosongan untuk setiap jenis aset
const vacancyData = {
    kuarters: [
        { id: 'Q001', name: 'Kuarters Jalan Bunga, Kuala Lumpur', vacancies: 3 },
        { id: 'Q002', name: 'Kuarters Taman Suria, Shah Alam', vacancies: 0 },
        { id: 'Q003', name: 'Kuarters Desa Permai, Petaling Jaya', vacancies: 2 },
        { id: 'Q004', name: 'Kuarters Bandar Baru Bangi', vacancies: 1 }
    ],
    pejabat: [
        { id: 'O001', name: 'Pejabat Wisma PKNS, Shah Alam', vacancies: 2 },
        { id: 'O002', name: 'Pejabat Menara KL Sentral', vacancies: 0 },
        { id: 'O003', name: 'Pejabat Cyberjaya', vacancies: 0 }
    ],
    kedai: [
        { id: 'S001', name: 'Lot Kedai Pasar Tani, Bangi', vacancies: 1 },
        { id: 'S002', name: 'Lot Kedai Kompleks 99, Kajang', vacancies: 0 },
        { id: 'S003', name: 'Lot Kedai Jalan Pasar, Klang', vacancies: 3 }
    ],
    tanah: [
        { id: 'L001', name: 'Tanah Lot 123, Seksyen 5, Shah Alam', vacancies: 1 },
        { id: 'L002', name: 'Tanah Lot 456, Mukim Kajang', vacancies: 2 }
    ],
    rumah_rehat: [
        { id: 'RR001', name: 'Rumah Rehat Port Dickson', vacancies: 0 },
        { id: 'RR002', name: 'Rumah Rehat Cameron Highlands', vacancies: 1 }
    ],
    bilik: [
        { id: 'BS001', name: 'Bilik Sejuk Kompleks A, Putrajaya', vacancies: 2 }
    ],
    slipway: [
        { id: 'SW001', name: 'Slipway Lumut, Perak', vacancies: 1 },
        { id: 'SW002', name: 'Slipway Penang', vacancies: 0 }
    ],
    pphp: [
        { id: 'PP001', name: 'PPHP Kuala Selangor', vacancies: 1 },
        { id: 'PP002', name: 'PPHP Langkawi', vacancies: 2 }
    ],
    kompleks: [
        { id: 'KC001', name: 'Kompleks Perniagaan, Cyberjaya', vacancies: 4 }
    ],
    pasar: [
        { id: 'PN001', name: 'Pasar Nelayan Kuantan, Pahang', vacancies: 1 },
        { id: 'PN002', name: 'Pasar Nelayan Kuala Terengganu', vacancies: 0 }
    ],
    akuakultur: [
        { id: 'AQ001', name: 'Tapak Akuakultur Besut, Terengganu', vacancies: 2 }
    ],
    ccdc: [
        { id: 'CC001', name: 'CCDC Wilayah Utara, Alor Setar', vacancies: 0 },
        { id: 'CC002', name: 'CCDC Wilayah Selatan, Johor Bahru', vacancies: 3 }
    ],
    jeti: [
        { id: 'JT001', name: 'Jeti Pelabuhan Klang', vacancies: 1 },
        { id: 'JT002', name: 'Jeti Pulau Ketam', vacancies: 0 }
    ]
};

// Initialize when page loads
document.addEventListener('DOMContentLoaded', function() {
    const assetType = document.getElementById('assetType');
    const assetLocation = document.getElementById('assetLocation');
    
    // Status message elements
    const initialMessage = document.getElementById('initialMessage');
    const loadingMessage = document.getElementById('loadingMessage');
    const noVacancyMessage = document.getElementById('noVacancyMessage');
    
    // Function to hide all messages and dropdown
    function hideAllMessages() {
        initialMessage.style.display = 'none';
        loadingMessage.style.display = 'none';
        noVacancyMessage.style.display = 'none';
        assetLocation.style.display = 'none';
    }
    
    // Function to update location dropdown
    function updateLocationDropdown(assetTypeValue) {
        // Reset state
        hideAllMessages();
        assetLocation.innerHTML = '';
        assetLocation.disabled = true;
        
        if (!assetTypeValue) {
            initialMessage.style.display = 'block';
            return;
        }
        
        // Show loading message
        loadingMessage.style.display = 'block';
        
        // Simulate loading delay
        setTimeout(() => {
            processLocations(assetTypeValue);
        }, 300);
    }
    
    // Process locations data
    function processLocations(assetTypeValue) {
        // Get locations for selected asset type
        const locations = vacancyData[assetTypeValue];
        
        if (!locations || locations.length === 0) {
            hideAllMessages();
            noVacancyMessage.style.display = 'block';
            noVacancyMessage.innerHTML = `
                <i class="fas fa-exclamation-triangle"></i> 
                Tiada data lokasi untuk jenis aset ini
            `;
            return;
        }
        
        // Filter locations with vacancies
        const availableLocations = locations.filter(loc => loc.vacancies > 0);
        
        if (availableLocations.length === 0) {
            // No vacancies available
            hideAllMessages();
            noVacancyMessage.style.display = 'block';
            noVacancyMessage.innerHTML = `
                <i class="fas fa-exclamation-triangle"></i> 
                Tiada kekosongan untuk <strong>${assetType.options[assetType.selectedIndex].text}</strong> pada masa ini
            `;
        } else {
            // Vacancies available - show dropdown
            hideAllMessages();
            assetLocation.style.display = 'block';
            assetLocation.disabled = false;
            
            // Add default option
            const defaultOption = document.createElement('option');
            defaultOption.value = "";
            defaultOption.textContent = `-- Pilih lokasi (${availableLocations.length} pilihan) --`;
            defaultOption.disabled = true;
            defaultOption.selected = true;
            assetLocation.appendChild(defaultOption);
            
            // Add available locations
            availableLocations.forEach(location => {
                const option = document.createElement('option');
                option.value = location.id;
                option.textContent = `${location.name} (${location.vacancies} kosong)`;
                assetLocation.appendChild(option);
            });
            
            // Add change event listener for location
            assetLocation.addEventListener('change', function() {
                if (this.value) {
                    // You can add additional logic here when location is selected
                }
            });
        }
    }
    
    // Event listener for asset type change
    assetType.addEventListener('change', function() {
        updateLocationDropdown(this.value);
    });
});

// CSS styling
const style = document.createElement('style');
style.textContent = `
    .form-group {
        margin-bottom: 1rem;
    }
    
    .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #333;
    }
    
    .form-control {
        display: block;
        width: 100%;
        padding: 0.75rem 1rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #212529;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 0.375rem;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }
    
    .form-control:focus {
        color: #212529;
        background-color: #fff;
        border-color: #86b7fe;
        outline: 0;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }
    
    .form-control:disabled {
        background-color: #e9ecef;
        opacity: 1;
    }
    
    .form-text {
        display: block;
        margin-top: 0.25rem;
        font-size: 0.875em;
        color: #6c757d;
    }
    
    #statusMessage > div {
        padding: 1rem;
        border-radius: 0.375rem;
        margin-bottom: 1rem;
    }
    
    .status-initial {
        background-color: #f8f9fa;
        border: 1px solid #e9ecef;
        color: #6c757d;
    }
    
    .status-loading {
        background-color: #cff4fc;
        border: 1px solid #b6effb;
        color: #055160;
    }
    
    .status-no-vacancy {
        background-color: #fff3cd;
        border: 1px solid #ffecb5;
        color: #664d03;
    }
    
    .fa-spinner {
        margin-right: 0.5rem;
    }
    
    .fa-info-circle, .fa-exclamation-triangle {
        margin-right: 0.5rem;
    }
    
    /* Smooth animation for dropdown */
    #assetLocation {
        animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Better select styling */
    select.form-control option {
        padding: 0.5rem;
    }
`;
document.head.appendChild(style);

// Load Font Awesome if not already loaded
if (!document.querySelector('link[href*="font-awesome"]')) {
    const faLink = document.createElement('link');
    faLink.rel = 'stylesheet';
    faLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
    document.head.appendChild(faLink);
}
</script>
                 
                    <!-- Untuk user/pemohon biasa - HANYA lihat lokasi kosong --><!--
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 1.5rem;">
    <div class="form-group">
        <label for="assetType" class="form-label">Jenis Aset</label>
        <select id="assetType" class="form-control" required>
            <option value="" selected disabled>Sila pilih jenis aset</option>
            <option value="kuarters">Kuarters</option>
            <option value="pejabat">Pejabat</option>
            <option value="tanah">Tanah Lot</option>
            <option value="rumah_rehat">Rumah Rehat</option>
            <option value="kedai">Lot Kedai</option>
            <option value="bilik">Bilik Sejuk </option>
            <option value="slipway">Slipway</option>
            <option value="pphp">PPHP</option>
            <option value="kompleks">Kompleks</option>
            <option value="pasar">Pasar Nelayan</option>
            <option value="akuakultur">Akuakultur</option>
            <option value="ccdc">CCDC</option>
            <option value="jeti">Jeti</option>
            <!-- option lain... -->
        </select>
    </div>
    <!--
    <div class="form-group">
        <label for="assetLocation" class="form-label">Lokasi</label>
        <select id="assetLocation" class="form-control" required disabled>
            <option value="" selected disabled>Pilih jenis aset dahulu</option>
        </select>
        <div id="noVacancyMessage" class="text-danger small mt-1" style="display: none;">
             Tiada kekosongan pada lokasi ini
        </div>
    </div>
</div>
-->
<script>
// User hanya boleh pilih lokasi KOSONG sahaja
function updateLocationForUser() {
    const selectedType = assetType.value;
    const locations = vacancyData[selectedType] || [];
    
    // FILTER: Hanya lokasi dengan vacancies > 0
    const availableLocations = locations.filter(loc => loc.vacancies > 0);
    
    // Populate dropdown dengan lokasi kosong sahaja
    // ... (code seperti sebelumnya)
}
</script>
                 <!--   
                    <div class="form-row">
                        <div class="form-group">
                            <label for="assetType" class="required">Jenis Aset Dipohon</label>
                            <select id="assetType" class="form-control" required>
                                <option value="">Sila Pilih</option>
                                <option value="kuarters">Kuarters Kakitangan</option>
                                <option value="pejabat">Sewa Pejabat</option>
                                <option value="tanah">Sewa Tanah Lot</option>
                                <option value="rumah_rehat">Sewa Rumah Rehat</option>
                                <option value="kedai">Sewa Lot Kedai</option>
                                <option value="bilik">Bilik Sejuk </option>
                                <option value="slipway">Slipway</option>
                                <option value="pphp">PPHP</option>
                                <option value="kompleks">Kompleks</option>
                                <option value="pasar">Pasar Nelayan</option>
                                <option value="akuakultur">Akuakultur</option>
                                <option value="ccdc">CCDC</option>
                                <option value="jeti">Jeti</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="location" class="required">Lokasi Pilihan</label>
                            <select id="location" class="form-control" required>
                                <option value="">Sila Pilih Jenis Aset Dahulu</option>
                            </select>
                        </div>
                    </div>-->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 1.5rem;">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="startDate">Tarikh Mula Diingini</label>
                            <input type="date" id="startDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="duration">Tempoh Sewaan</label>
                            <select id="duration" class="form-control">
                                <option value="12">12 Bulan</option>
                                <option value="24">24 Bulan</option>
                                <option value="36" selected>36 Bulan</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="purpose" class="required">Tujuan Permohonan</label>
                        <textarea id="purpose" class="form-control" placeholder="Sila nyatakan tujuan permohonan sewaan ini..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalInfo">Maklumat Tambahan (Jika Ada)</label>
                        <textarea id="additionalInfo" class="form-control" placeholder="Sebarang maklumat tambahan yang perlu dimaklumkan..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <div style="display: flex; align-items: start; gap: 10px;">
                            <input type="checkbox" id="agreeTerms" required style="margin-top: 3px;">
                            <label for="agreeTerms" style="margin-bottom: 0; font-size: 0.9rem;">
                                Saya mengakui bahawa maklumat yang diberikan adalah benar.
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" id="cancelApplication">Batal</button>
                    <button type="submit" class="btn btn-primary">Hantar Permohonan</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(to right, var(--success), #20c997);">
                <h3><i class="fas fa-check-circle"></i> Permohonan Berjaya!</h3>
                <button class="close-modal" id="closeSuccessModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-modal">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 style="color: var(--primary); margin-bottom: 1rem;">Permohonan Anda Telah Dihantar</h3>
                    <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
                        No. Rujukan: <strong id="referenceNumber">APP-2023-001</strong>
                    </p>
                    <div style="background-color: var(--light); padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
                        <h4 style="margin-bottom: 1rem;">Maklumat Permohonan:</h4>
                        <div class="detail-item">
                            <span class="detail-label">Jenis Aset:</span>
                            <span class="detail-value" id="successAssetType">Kuarters Kakitangan</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Lokasi:</span>
                            <span class="detail-value" id="successLocation">Shah Alam</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Tarikh Mohon:</span>
                            <span class="detail-value" id="successDate">15 Oktober 2023</span>
                        </div>
                    </div>
                    <p style="margin-bottom: 2rem;">Permohonan anda akan diproses dalam tempoh 14 hari bekerja.</p>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn" id="closeSuccessBtn">Tutup</button>
                        <button class="btn btn-primary" id="viewStatusBtn">Lihat Status</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // DATA STORAGE AND INITIALIZATION
        // ============================================
        
        // Storage Keys
        const USER_DB_KEY = 'asset_rental_users';
        const CURRENT_USER_KEY = 'current_asset_user';
        const APPLICATIONS_KEY = 'user_applications';
        const ASSETS_KEY = 'asset_data';
        
        // Asset Data
        const ASSETS_DATA = [
            {
                id: 1,
                type: "kuarters",
                name: "Kuarters Kakitangan",
                icon: "fas fa-home",
                color: "#9b59b6",
                location: "Shah Alam, Seksyen 7",
                totalUnits: 24,
                availableUnits: 8,
                size: "850 sq.ft.",
                bedrooms: 3,
                monthlyRent: "RM 450",
                status: "available",
                description: "Kuarters untuk kakitangan kerajaan dengan 3 bilik tidur, lengkap dengan kemudahan asas."
            },
            {
                id: 2,
                type: "kuarters",
                name: "Kuarters Kakitangan",
                icon: "fas fa-home",
                color: "#9b59b6",
                location: "Petaling Jaya, Seksyen 14",
                totalUnits: 18,
                availableUnits: 3,
                size: "750 sq.ft.",
                bedrooms: 2,
                monthlyRent: "RM 380",
                status: "limited",
                description: "Kuarters dengan 2 bilik tidur sesuai untuk kakitangan bujang atau pasangan."
            },
            {
                id: 3,
                type: "pejabat",
                name: "Pejabat LKIM Perlis",
                icon: "fas fa-building",
                color: "#3498db",
                location: "Kuala Perlis,Perlis",
                totalUnits: 12,
                availableUnits: 4,
                size: "1,200 sq.ft.",
                monthlyRent: "RM 2,500",
                status: "available",
                description: "Pejabat di lokasi strategik dengan kemudahan lengkap termasuk parking."
            },
            {
                id: 4,
                type: "kedai",
                name: "Lot Kedai - Kompleks Perniagaan",
                icon: "fas fa-store",
                color: "#f39c12",
                location: "Subang Jaya, SS15",
                totalUnits: 8,
                availableUnits: 2,
                size: "800 sq.ft.",
                monthlyRent: "RM 1,800",
                status: "available",
                description: "Lot kedai di kawasan komersial dengan foot traffic yang tinggi."
            },
            {
                id: 5,
                type: "tanah",
                name: "Tanah Lot - Seksyen 1",
                icon: "fas fa-map-marked-alt",
                color: "#2ecc71",
                location: "Klang, Kawasan Perindustrian",
                totalUnits: 5,
                availableUnits: 1,
                size: "10,000 sq.ft.",
                monthlyRent: "RM 3,200",
                status: "limited",
                description: "Tanah lot untuk tujuan perindustrian atau komersial."
            },
            {
                id: 6,
                type: "rumah_rehat",
                name: "Rumah Rehat - Cameron Highlands",
                icon: "fas fa-umbrella-beach",
                color: "#e74c3c",
                location: "Cameron Highlands",
                totalUnits: 3,
                availableUnits: 0,
                size: "1,500 sq.ft.",
                bedrooms: 4,
                monthlyRent: "RM 5,000",
                status: "unavailable",
                description: "Rumah rehat untuk percutian kakitangan kerajaan."
            },
            {
                id: 7,
                type: "bilik",
                name: "Bilik - Asrama Kakitangan",
                icon: "fas fa-door-closed",
                color: "#7f8c8d",
                location: "Seremban, Kompleks Kerajaan",
                totalUnits: 45,
                availableUnits: 12,
                size: "200 sq.ft.",
                monthlyRent: "RM 180",
                status: "available",
                description: "Bilik di asrama kakitangan dengan kemudahan berkongsi."
            }
        ];
        
        // Categories
        const CATEGORIES = [
            { id: "all", name: "Semua", icon: "fas fa-th" },
            { id: "kuarters", name: "Kuarters", icon: "fas fa-home" },
            { id: "pejabat", name: "Pejabat", icon: "fas fa-building" },
            { id: "kedai", name: "Lot Kedai", icon: "fas fa-store" },
            { id: "tanah", name: "Tanah Lot", icon: "fas fa-map-marked-alt" },
            { id: "rumah_rehat", name: "Rumah Rehat", icon: "fas fa-umbrella-beach" },
            { id: "bilik", name: "Bilik Sejuk", icon: "fas fa-door-closed" },
            { id: "slipway", name: "Slipway", icon: "" },
            { id: "pphp", name: "PPHP", icon: "" },
            { id: "kompleks", name: "Kompleks", icon: "" },
            { id: "pasar", name: "Pasar Nelayan", icon: "" },
            { id: "akuakultur", name: "Akuakultur", icon: "" },
            { id: "ccdc", name: "CCDC", icon: "" },
            { id: "jeti", name: "Jeti", icon: "" },
           
        ];
        
        // Demo Users
        const DEMO_USERS = [
            {
                id: 1,
                name: "Ahmad bin Ali",
                ic: "850505011234",
                email: "ahmad@email.com",
                phone: "0123456789",
                password: "password123",
                userType: "staff",
                department: "Jabatan Kerja Raya",
                createdAt: "2023-10-01",
                status: "active"
            },
            {
                id: 2,
                name: "Siti binti Hassan",
                ic: "900101011234",
                email: "siti@email.com",
                phone: "0134567890",
                password: "password123",
                userType: "public",
                createdAt: "2023-10-05",
                status: "active"
            }
        ];
        
        // Global Variables
        let currentUser = null;
        let userApplications = [];
        let assets = [...ASSETS_DATA];
        let users = [];
        
        // ============================================
        // INITIALIZATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeSystem();
            setupEventListeners();
            checkLoginStatus();
        });
        
        function initializeSystem() {
            // Initialize users database
            const storedUsers = localStorage.getItem(USER_DB_KEY);
            if (!storedUsers) {
                users = DEMO_USERS;
                localStorage.setItem(USER_DB_KEY, JSON.stringify(users));
            } else {
                users = JSON.parse(storedUsers);
            }
            
            // Initialize applications
            const storedApps = localStorage.getItem(APPLICATIONS_KEY);
            userApplications = storedApps ? JSON.parse(storedApps) : [];
            
            // Initialize assets
            const storedAssets = localStorage.getItem(ASSETS_KEY);
            assets = storedAssets ? JSON.parse(storedAssets) : ASSETS_DATA;
            localStorage.setItem(ASSETS_KEY, JSON.stringify(assets));
            
            // Update statistics
            updateStatistics();
        }
        
        function checkLoginStatus() {
            const storedUser = sessionStorage.getItem(CURRENT_USER_KEY) || 
                              localStorage.getItem(CURRENT_USER_KEY);
            
            if (storedUser) {
                currentUser = JSON.parse(storedUser);
                showApplication();
            } else {
                showAuthentication();
            }
        }
        
        // ============================================
        // AUTHENTICATION FUNCTIONS
        // ============================================
        
        function showAuthentication() {
            document.getElementById('authPage').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
        }
        
        function showApplication() {
            document.getElementById('authPage').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            
            // Update user interface
            updateUserInterface();
            renderCategories();
            renderAssets();
            updateApplicationsList();
            updateUserProfile();
        }
        
        function handleLogin(e) {
            e.preventDefault();
            
            const identifier = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            // Validate
            if (!validateLoginForm()) {
                return;
            }
            
            // Find user
            const user = users.find(u => 
                u.email === identifier || u.ic === identifier.replace(/-/g, '')
            );
            
            if (!user) {
                showError('loginEmailError', 'Akaun tidak ditemui');
                return;
            }
            
            if (user.password !== password) {
                showError('loginPasswordError', 'Kata laluan tidak betul');
                return;
            }
            
            // Login successful
            currentUser = {
                id: user.id,
                name: user.name,
                email: user.email,
                ic: user.ic,
                phone: user.phone,
                userType: user.userType,
                department: user.department,
                createdAt: user.createdAt
            };
            
            // Save to storage
            sessionStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
            
            if (rememberMe) {
                localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
            }
            
            // Show application
            showApplication();
            
            // Show welcome notification
            showNotification(`Selamat datang, ${user.name}!`, 'success');
        }
        
        function handleRegister(e) {
            e.preventDefault();
            
            // Validate form
            if (!validateRegisterForm()) {
                return;
            }
            
            // Check terms
            if (!document.getElementById('agreeTerms').checked) {
                showError('termsError', 'Sila setuju dengan terma dan syarat');
                return;
            }
            
            // Create user object
            const userData = {
                id: users.length + 1,
                name: document.getElementById('registerName').value.trim(),
                ic: document.getElementById('registerIC').value.replace(/[-\s]/g, ''),
                email: document.getElementById('registerEmail').value.trim(),
                phone: document.getElementById('registerPhone').value.replace(/[-\s]/g, ''),
                password: document.getElementById('registerPassword').value,
                userType: document.getElementById('userType').value,
                department: document.getElementById('userType').value === 'staff' ? 'Jabatan Kerajaan' : 'Orang Awam',
                createdAt: new Date().toISOString().split('T')[0],
                status: 'active'
            };
            
            // Save user
            users.push(userData);
            localStorage.setItem(USER_DB_KEY, JSON.stringify(users));
            
            // Set as current user
            currentUser = {
                id: userData.id,
                name: userData.name,
                email: userData.email,
                ic: userData.ic,
                phone: userData.phone,
                userType: userData.userType,
                department: userData.department,
                createdAt: userData.createdAt
            };
            
            sessionStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
            
            // Show success message
            document.getElementById('registerForm').classList.remove('active');
            document.getElementById('successMessage').classList.add('active');
            
            // Auto login after 3 seconds
            setTimeout(() => {
                showApplication();
                showNotification(`Pendaftaran berjaya! Selamat datang, ${userData.name}`, 'success');
            }, 3000);
        }
        
        function validateLoginForm() {
            let isValid = true;
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email) {
                showError('loginEmailError', 'Sila masukkan email atau No. KP');
                isValid = false;
            } else {
                clearError('loginEmailError');
            }
            
            if (!password) {
                showError('loginPasswordError', 'Sila masukkan kata laluan');
                isValid = false;
            } else {
                clearError('loginPasswordError');
            }
            
            return isValid;
        }
        
        function validateRegisterForm() {
            let isValid = true;
            
            // Validate each field
            const validations = [
                validateField('registerName', validateName, 'Sila masukkan nama penuh'),
                validateField('registerIC', validateIC, 'No. KP tidak sah'),
                validateField('registerEmail', validateEmail, 'Email tidak sah'),
                validateField('registerPhone', validatePhone, 'No. telefon tidak sah'),
                validateField('registerPassword', validatePassword, 'Kata laluan tidak sah'),
                validateField('registerConfirmPassword', validateConfirmPassword, 'Kata laluan tidak sepadan')
            ];
            
            return validations.every(v => v === true);
        }
        
        function validateField(fieldId, validationFn, errorMessage) {
            const field = document.getElementById(fieldId);
            const value = field.value.trim();
            const errorId = `${fieldId}Error`;
            
            if (!value) {
                showError(errorId, 'Field ini diperlukan');
                return false;
            }
            
            if (!validationFn(value)) {
                showError(errorId, errorMessage);
                return false;
            }
            
            clearError(errorId);
            return true;
        }
        
        function validateName(name) {
            return name.length >= 3 && name.length <= 100;
        }
        
        function validateIC(ic) {
            const cleanIC = ic.replace(/[-\s]/g, '');
            return /^\d{12}$/.test(cleanIC);
        }
        
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        function validatePhone(phone) {
            const cleanPhone = phone.replace(/[-\s]/g, '');
            return /^[0-9]{10,11}$/.test(cleanPhone);
        }
        
        function validatePassword(password) {
            return password.length >= 8 && /[A-Z]/.test(password) && /[a-z]/.test(password) && /\d/.test(password);
        }
        
        function validateConfirmPassword(confirmPassword) {
            const password = document.getElementById('registerPassword').value;
            return confirmPassword === password;
        }
        
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = 'validation-message error';
        }
        
        function clearError(elementId) {
            const element = document.getElementById(elementId);
            element.textContent = '';
            element.className = 'validation-message';
        }
        
        // ============================================
        // USER INTERFACE FUNCTIONS
        // ============================================
        
        function updateUserInterface() {
            if (!currentUser) return;
            
            // Update header
            document.getElementById('headerUserName').textContent = currentUser.name.split(' ')[0];
            document.getElementById('userAvatar').textContent = getInitials(currentUser.name);
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userTypeBadge').textContent = getUserTypeText(currentUser.userType);
            
            // Update welcome banner
            document.getElementById('welcomeTitle').textContent = `Selamat Datang, ${currentUser.name.split(' ')[0]}!`;
            document.getElementById('welcomeMessage').textContent = currentUser.userType === 'staff' ? 
                'Anda layak memohon kuarters kakitangan dan aset lain.' : 
                'Anda layak memohon sewaan aset kerajaan.';
            document.getElementById('userWelcomeBadge').textContent = getUserTypeText(currentUser.userType);
            
            // Update dashboard
            updateDashboard();
        }
        
        function updateDashboard() {
            // Calculate statistics
            const quartersAsset = assets.find(a => a.type === 'kuarters');
            const totalQuarters = quartersAsset ? 
                assets.filter(a => a.type === 'kuarters').reduce((sum, a) => sum + a.totalUnits, 0) : 0;
            const availableQuarters = quartersAsset ? 
                assets.filter(a => a.type === 'kuarters').reduce((sum, a) => sum + a.availableUnits, 0) : 0;
            
            const myApplications = userApplications.filter(app => app.applicantId === currentUser.id).length;
            const pendingApplications = userApplications.filter(app => 
                app.applicantId === currentUser.id && app.status === 'processing').length;
            
            // Update dashboard cards
            document.getElementById('dashboardTotalQuarters').textContent = totalQuarters;
            document.getElementById('dashboardAvailableQuarters').textContent = availableQuarters;
            document.getElementById('dashboardMyApplications').textContent = myApplications;
            document.getElementById('dashboardPending').textContent = pendingApplications;
            
            // Update header statistics
            document.getElementById('headerTotalQuarters').textContent = totalQuarters;
            document.getElementById('headerAvailableQuarters').textContent = availableQuarters;
            
            // Update assets page
            document.getElementById('totalCount').textContent = totalQuarters;
            document.getElementById('availableCount').textContent = availableQuarters;
        }
        
        function updateUserProfile() {
            if (!currentUser) return;
            
            document.getElementById('profileName').textContent = currentUser.name;
            document.getElementById('profileEmail').textContent = currentUser.email;
            document.getElementById('profileIC').textContent = formatIC(currentUser.ic);
            document.getElementById('profilePhone').textContent = formatPhone(currentUser.phone);
            document.getElementById('profileDepartment').textContent = currentUser.department || 'Tiada';
            document.getElementById('profileSince').textContent = formatDate(currentUser.createdAt);
            document.getElementById('profileUserType').textContent = getUserTypeText(currentUser.userType);
            document.getElementById('profileAvatar').textContent = getInitials(currentUser.name);
        }
        
        function renderCategories() {
            const categoryList = document.getElementById('categoryList');
            categoryList.innerHTML = '';
            
            CATEGORIES.forEach(category => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <a href="#" data-category="${category.id}">
                        <i class="${category.icon}"></i> ${category.name}
                    </a>
                `;
                categoryList.appendChild(li);
            });
            
            // Set first category as active
            categoryList.children[0].querySelector('a').classList.add('active');
            
            // Add event listeners
            document.querySelectorAll('[data-category]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active state
                    document.querySelectorAll('[data-category]').forEach(a => {
                        a.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Filter assets
                    const category = this.getAttribute('data-category');
                    filterAssets(category);
                });
            });
        }
        
        function renderAssets(assetsToRender = assets) {
            const assetsGrid = document.getElementById('assetsGrid');
            assetsGrid.innerHTML = '';
            
            // Filter by user type (staff can see all, public cannot see kuarters)
            let filteredAssets = assetsToRender;
            if (currentUser && currentUser.userType === 'public') {
                filteredAssets = filteredAssets.filter(asset => asset.type !== 'kuarters');
            }
            
            if (filteredAssets.length === 0) {
                assetsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; background-color: white; border-radius: 12px;">
                        <i class="fas fa-search" style="font-size: 3rem; color: var(--gray); margin-bottom: 1rem;"></i>
                        <h3>Tiada Aset Ditemui</h3>
                        <p>Tidak ada aset yang tersedia mengikut carian anda.</p>
                    </div>
                `;
                return;
            }
            
            filteredAssets.forEach(asset => {
                // Determine status
                let statusClass, statusText;
                if (asset.availableUnits === 0) {
                    statusClass = "status-unavailable";
                    statusText = "Tidak Tersedia";
                } else if (asset.availableUnits <= 2) {
                    statusClass = "status-limited";
                    statusText = "Terhad";
                } else {
                    statusClass = "status-available";
                    statusText = "Tersedia";
                }
                
                const card = document.createElement('div');
                card.className = 'asset-card';
                card.innerHTML = `
                    <div class="asset-image" style="background-color: ${asset.color}20; color: ${asset.color};">
                        <i class="${asset.icon}"></i>
                        <div class="asset-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="asset-content">
                        <h3 class="asset-title">${asset.name}</h3>
                        <div class="asset-location">
                            <i class="fas fa-map-marker-alt"></i> ${asset.location}
                        </div>
                        <div class="asset-details">
                            <p>${asset.description}</p>
                            <div class="detail-item">
                                <span class="detail-label">Saiz:</span>
                                <span class="detail-value">${asset.size}</span>
                            </div>
                            ${asset.bedrooms ? `
                            <div class="detail-item">
                                <span class="detail-label">Bilik Tidur:</span>
                                <span class="detail-value">${asset.bedrooms}</span>
                            </div>
                            ` : ''}
                            <div class="detail-item">
                                <span class="detail-label">Sewa Bulanan:</span>
                                <span class="detail-value">${asset.monthlyRent}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Unit Tersedia:</span>
                                <span class="detail-value">${asset.availableUnits} / ${asset.totalUnits}</span>
                            </div>
                        </div>
                        <div class="asset-actions">
                            ${asset.availableUnits > 0 ? `
                            <button class="btn btn-primary btn-block apply-now-btn" data-asset-id="${asset.id}">
                                <i class="fas fa-pen"></i> Mohon Sekarang
                            </button>
                            ` : `
                            <button class="btn btn-block" disabled style="background-color: #e9ecef; color: #6c757d; cursor: not-allowed;">
                                <i class="fas fa-times-circle"></i> Tiada Kekosongan
                            </button>
                            `}
                        </div>
                    </div>
                `;
                
                assetsGrid.appendChild(card);
            });
            
            // Add event listeners to apply buttons
            document.querySelectorAll('.apply-now-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const assetId = this.getAttribute('data-asset-id');
                    showApplicationModal(assetId);
                });
            });
        }
        
        function filterAssets(category) {
            if (category === 'all') {
                renderAssets(assets);
                return;
            }
            
            const filteredAssets = assets.filter(asset => asset.type === category);
            renderAssets(filteredAssets);
        }
        
        function updateApplicationsList() {
            const statusContainer = document.getElementById('applicationStatus');
            const userApps = userApplications.filter(app => app.applicantId === currentUser.id);
            
            if (userApps.length === 0) {
                statusContainer.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--gray);">
                        <i class="fas fa-file-alt" style="font-size: 2.5rem; margin-bottom: 1rem;"></i>
                        <h3>Tiada Permohonan</h3>
                        <p>Anda belum membuat sebarang permohonan. Pilih aset untuk memohon.</p>
                    </div>
                `;
                return;
            }
            
            statusContainer.innerHTML = '';
            userApps.forEach(app => {
                let badgeClass;
                switch(app.status) {
                    case 'processing': badgeClass = 'badge-processing'; break;
                    case 'approved': badgeClass = 'badge-approved'; break;
                    case 'rejected': badgeClass = 'badge-rejected'; break;
                    default: badgeClass = 'badge-processing';
                }
                
                const item = document.createElement('div');
                item.className = 'status-item';
                item.innerHTML = `
                    <div class="status-info">
                        <h4>${app.assetName}</h4>
                        <p>No. Rujukan: ${app.reference} | Tarikh Mohon: ${formatDate(app.applyDate)}</p>
                    </div>
                    <div class="status-badge ${badgeClass}">${app.statusText}</div>
                `;
                statusContainer.appendChild(item);
            });
        }
        
        // ============================================
        // APPLICATION FUNCTIONS
        // ============================================
        
        function showApplicationModal(assetId = null) {
            const modal = document.getElementById('applicationModal');
            modal.style.display = 'flex';
            
            // Auto-fill user data
            if (currentUser) {
                document.getElementById('applicantName').value = currentUser.name;
                document.getElementById('applicantIC').value = formatIC(currentUser.ic);
                document.getElementById('applicantPhone').value = formatPhone(currentUser.phone);
                document.getElementById('applicantEmail').value = currentUser.email;
                document.getElementById('applicantAddress').value = 'Alamat tidak dinyatakan';
                
                // Show auto-fill notification
                document.getElementById('autoFillNotification').style.display = 'flex';
            }
            
            // Set asset type if provided
            if (assetId) {
                const asset = assets.find(a => a.id == assetId);
                if (asset) {
                    document.getElementById('assetType').value = asset.type;
                    populateLocationDropdown(asset.type);
                    
                    // Set default location
                    setTimeout(() => {
                        const locationSelect = document.getElementById('location');
                        for (let i = 0; i < locationSelect.options.length; i++) {
                            if (locationSelect.options[i].text.includes(asset.location.split(',')[0])) {
                                locationSelect.value = locationSelect.options[i].value;
                                break;
                            }
                        }
                    }, 100);
                }
            }
            
            // Set default start date (tomorrow)
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('startDate').value = tomorrow.toISOString().split('T')[0];
        }
        
        function populateLocationDropdown(assetType) {
            const locationSelect = document.getElementById('location');
            locationSelect.innerHTML = '<option value="">Sila Pilih Lokasi</option>';
            
            if (!assetType) return;
            
            // Get unique locations for this asset type
            const locations = [...new Set(assets
                .filter(asset => asset.type === assetType)
                .map(asset => asset.location.split(',')[0].trim())
            )];
            
            locations.forEach((location, index) => {
                const option = document.createElement('option');
                option.value = location;
                option.textContent = location;
                locationSelect.appendChild(option);
            });
        }
        
        function submitApplication(event) {
            event.preventDefault();
            
            // Get form values
            const application = {
                id: Date.now(),
                reference: `APP-${new Date().getFullYear()}-${String(userApplications.length + 1).padStart(3, '0')}`,
                assetType: document.getElementById('assetType').value,
                assetName: document.getElementById('assetType').options[document.getElementById('assetType').selectedIndex].text,
                location: document.getElementById('location').value,
                applyDate: new Date().toISOString().split('T')[0],
                applicantId: currentUser.id,
                applicantName: document.getElementById('applicantName').value,
                status: 'processing',
                statusText: 'Dalam Proses',
                purpose: document.getElementById('purpose').value
            };
            
            // Save application
            userApplications.unshift(application);
            localStorage.setItem(APPLICATIONS_KEY, JSON.stringify(userApplications));
            
            // Update asset availability (AUTOCOUNT)
            updateAssetAvailability(application.assetType);
            
            // Update UI
            updateApplicationsList();
            updateDashboard();
            
            // Show success modal
            showSuccessModal(application);
            
            // Close application modal
            closeModal('applicationModal');
        }
        
        function updateAssetAvailability(assetType) {
            // Find an available asset of this type
            const asset = assets.find(a => a.type === assetType && a.availableUnits > 0);
            if (asset) {
                asset.availableUnits -= 1;
                localStorage.setItem(ASSETS_KEY, JSON.stringify(assets));
                
                // Update display
                updateDashboard();
                
                // Re-render assets if on assets page
                if (document.getElementById('assetsPage').classList.contains('active')) {
                    const activeCategory = document.querySelector('.category-list a.active').getAttribute('data-category');
                    filterAssets(activeCategory);
                }
            }
        }
        
        function showSuccessModal(application) {
            document.getElementById('referenceNumber').textContent = application.reference;
            document.getElementById('successAssetType').textContent = application.assetName;
            document.getElementById('successLocation').textContent = application.location;
            document.getElementById('successDate').textContent = formatDate(application.applyDate);
            
            document.getElementById('successModal').style.display = 'flex';
        }
        
        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        
        function getInitials(name) {
            return name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
        }
        
        function getUserTypeText(userType) {
            return userType === 'staff' ? 'Kakitangan Kerajaan' : 'Orang Awam';
        }
        
        function formatIC(ic) {
            if (!ic) return '';
            const str = ic.toString();
            if (str.length === 12) {
                return str.substring(0, 6) + '-' + str.substring(6, 8) + '-' + str.substring(8);
            }
            return str;
        }
        
        function formatPhone(phone) {
            if (!phone) return '';
            const str = phone.toString();
            if (str.length === 10) {
                return str.substring(0, 3) + '-' + str.substring(3, 6) + ' ' + str.substring(6);
            } else if (str.length === 11) {
                return str.substring(0, 3) + '-' + str.substring(3, 7) + ' ' + str.substring(7);
            }
            return str;
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ms-MY', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }
        
        function updateStatistics() {
            // Calculate total quarters
            const quartersAssets = assets.filter(a => a.type === 'kuarters');
            const totalQuarters = quartersAssets.reduce((sum, a) => sum + a.totalUnits, 0);
            const availableQuarters = quartersAssets.reduce((sum, a) => sum + a.availableUnits, 0);
            
            // Update global statistics
            // (These would be used in multiple places)
        }
        
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                background-color: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--danger)' : 'var(--primary)'};
                color: white;
                display: flex;
                align-items: center;
                gap: 10px;
                z-index: 3000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                animation: slideInRight 0.3s ease;
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 5000);
            
            // Add CSS for animations
            if (!document.getElementById('notificationStyles')) {
                const style = document.createElement('style');
                style.id = 'notificationStyles';
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // ============================================
        // EVENT LISTENERS SETUP
        // ============================================
        
        function setupEventListeners() {
            // Authentication Tabs
            document.getElementById('loginTab').addEventListener('click', () => switchAuthTab('login'));
            document.getElementById('registerTab').addEventListener('click', () => switchAuthTab('register'));
            document.getElementById('goToRegister').addEventListener('click', (e) => {
                e.preventDefault();
                switchAuthTab('register');
            });
            document.getElementById('goToLogin').addEventListener('click', (e) => {
                e.preventDefault();
                switchAuthTab('login');
            });
            document.getElementById('goToLoginFromSuccess').addEventListener('click', (e) => {
                e.preventDefault();
                switchAuthTab('login');
            });
            
            // Password Toggles
            document.getElementById('toggleLoginPassword').addEventListener('click', togglePasswordVisibility.bind(null, 'loginPassword'));
            document.getElementById('toggleRegisterPassword').addEventListener('click', togglePasswordVisibility.bind(null, 'registerPassword'));
            document.getElementById('toggleConfirmPassword').addEventListener('click', togglePasswordVisibility.bind(null, 'registerConfirmPassword'));
            
            // User Type Selection
            document.querySelectorAll('.user-type-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.user-type-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    document.getElementById('userType').value = this.dataset.type;
                });
            });
            
            // Form Submissions
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            document.getElementById('rentalApplicationForm').addEventListener('submit', submitApplication);
            
            // Demo Login
            document.getElementById('demoLoginBtn').addEventListener('click', function() {
                document.getElementById('loginEmail').value = 'ahmad@email.com';
                document.getElementById('loginPassword').value = 'password123';
                document.getElementById('rememberMe').checked = true;
                
                // Auto submit after 1 second
                setTimeout(() => {
                    document.getElementById('loginForm').dispatchEvent(new Event('submit'));
                }, 1000);
            });
            
            // Navigation
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active state
                    document.querySelectorAll('.nav-links a').forEach(a => {
                        a.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Show corresponding page
                    const page = this.getAttribute('data-page');
                    document.querySelectorAll('.page-content').forEach(p => {
                        p.classList.remove('active');
                    });
                    document.getElementById(`${page}Page`).classList.add('active');
                });
            });
            
            // Footer Links
            document.querySelectorAll('.footer-links a[data-page]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    document.querySelector(`.nav-links a[data-page="${page}"]`).click();
                });
            });
            
            // Application Buttons
            document.getElementById('newApplicationBtn').addEventListener('click', () => showApplicationModal());
            document.getElementById('applyNewBtn').addEventListener('click', () => showApplicationModal());
            
            // Modal Close Buttons
            document.getElementById('closeModal').addEventListener('click', () => closeModal('applicationModal'));
            document.getElementById('cancelApplication').addEventListener('click', () => closeModal('applicationModal'));
            document.getElementById('closeSuccessModal').addEventListener('click', () => closeModal('successModal'));
            document.getElementById('closeSuccessBtn').addEventListener('click', () => closeModal('successModal'));
            document.getElementById('viewStatusBtn').addEventListener('click', () => {
                closeModal('successModal');
                document.querySelector('.nav-links a[data-page="application"]').click();
            });
            
            // Search
            document.getElementById('searchBtn').addEventListener('click', performSearch);
            
            // Asset Type Change
            document.getElementById('assetType').addEventListener('change', function() {
                populateLocationDropdown(this.value);
            });
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('Adakah anda pasti ingin log keluar?')) {
                    sessionStorage.removeItem(CURRENT_USER_KEY);
                    localStorage.removeItem(CURRENT_USER_KEY);
                    currentUser = null;
                    showAuthentication();
                    
                    // Reset forms
                    document.getElementById('loginForm').reset();
                }
            });
            
            // Edit Profile
            document.getElementById('editProfileBtn').addEventListener('click', function() {
                alert('Fungsi kemaskini profil akan datang tidak lama lagi.');
            });
            
            // Forgot Password
            document.getElementById('forgotPasswordLink').addEventListener('click', function(e) {
                e.preventDefault();
                alert('Fungsi reset kata laluan akan dihantar ke email anda. Untuk demo, gunakan:\nEmail: ahmad@email.com\nPassword: password123');
            });
        }
        
        function switchAuthTab(tabName) {
            // Update tabs
            document.getElementById('loginTab').classList.remove('active');
            document.getElementById('registerTab').classList.remove('active');
            
            if (tabName === 'login') {
                document.getElementById('loginTab').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
                document.getElementById('registerForm').classList.remove('active');
                document.getElementById('successMessage').classList.remove('active');
            } else {
                document.getElementById('registerTab').classList.add('active');
                document.getElementById('loginForm').classList.remove('active');
                document.getElementById('registerForm').classList.add('active');
                document.getElementById('successMessage').classList.remove('active');
            }
        }
        
        function togglePasswordVisibility(fieldId) {
            const field = document.getElementById(fieldId);
            const toggleBtn = document.getElementById(`toggle${fieldId.charAt(0).toUpperCase() + fieldId.slice(1)}`);
            
            if (field.type === 'password') {
                field.type = 'text';
                toggleBtn.innerHTML = '<i class="fas fa-eye-slash"></i>';
            } else {
                field.type = 'password';
                toggleBtn.innerHTML = '<i class="fas fa-eye"></i>';
            }
        }
        
        function performSearch() {
            const type = document.getElementById('searchType').value;
            const location = document.getElementById('searchLocation').value;
            
            let filteredAssets = assets;
            
            // Filter by type
            if (type) {
                filteredAssets = filteredAssets.filter(asset => asset.type === type);
            }
            
            // Filter by location
            if (location) {
                filteredAssets = filteredAssets.filter(asset => {
                    return asset.location.toLowerCase().includes(getLocationText(location));
                });
            }
            
            renderAssets(filteredAssets);
            
            // Update active category
            if (type) {
                document.querySelectorAll('[data-category]').forEach(a => {
                    a.classList.remove('active');
                    if (a.getAttribute('data-category') === type) {
                        a.classList.add('active');
                    }
                });
            } else {
                document.querySelectorAll('[data-category]').forEach(a => {
                    a.classList.remove('active');
                    if (a.getAttribute('data-category') === 'all') {
                        a.classList.add('active');
                    }
                });
            }
        }
        
        function getLocationText(locationCode) {
            const locations = {
                'kl': 'kuala lumpur',
                'shahalam': 'shah alam',
                'pj': 'petaling jaya',
                'subang': 'subang jaya'
            };
            
            return locations[locationCode] || '';
        }
        
        // ============================================
        // GLOBAL FUNCTIONS
        // ============================================
        
        window.showApplicationModal = showApplicationModal;
        window.closeModal = closeModal;
        
        // Quick test function
        window.quickTest = function() {
            // Fill register form with test data
            document.getElementById('registerName').value = 'Test User';
            document.getElementById('registerIC').value = '900101011234';
            document.getElementById('registerEmail').value = 'test@email.com';
            document.getElementById('registerPhone').value = '0123456789';
            document.getElementById('registerPassword').value = 'Test1234';
            document.getElementById('registerConfirmPassword').value = 'Test1234';
            document.getElementById('agreeTerms').checked = true;
            
            showNotification('Test data telah diisi!', 'info');
        };
    </script>
</body>
</html>
